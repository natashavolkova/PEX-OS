"use strict";(()=>{var e={};e.id=343,e.ids=[343],e.modules={399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},2652:(e,t,i)=>{i.r(t),i.d(t,{originalPathname:()=>h,patchFetch:()=>k,requestAsyncStorage:()=>d,routeModule:()=>p,serverHooks:()=>f,staticGenerationAsyncStorage:()=>g});var r={};i.r(r),i.d(r,{GET:()=>u,POST:()=>m});var o=i(9303),a=i(8716),s=i(670),n=i(7070),c=i(2839),l=i(650);async function u(e){let{searchParams:t}=new URL(e.url),i=t.get("period")||"week",r=t.get("projectId");console.log("[API] GET /api/analytics/impact",{period:i,projectId:r});let o=[...c.OK],a=[...c.ZQ];r&&(o=o.filter(e=>e.projectId===r),a=a.filter(e=>e.id===r));let s=o.filter(e=>"completed"===e.status),u=o.filter(e=>"in_progress"===e.status),m=o.filter(e=>"blocked"===e.status),p=s.reduce((e,t)=>e+t.impactScore,0),d=s.reduce((e,t)=>e+t.effortScore,0),g=s.length>0?s.reduce((e,t)=>e+t.roiScore,0)/s.length:0,f={quickWins:o.filter(e=>e.roiScore>=2&&"completed"!==e.status),strategic:o.filter(e=>e.roiScore>=1&&e.roiScore<2&&"completed"!==e.status),fillIns:o.filter(e=>e.roiScore>=.5&&e.roiScore<1&&"completed"!==e.status),timeWasters:o.filter(e=>e.roiScore<.5&&"completed"!==e.status)},h=a.map(e=>{let t=o.filter(t=>t.projectId===e.id),i=t.filter(e=>"completed"===e.status).length,r=t.length,a=t.length>0?t.reduce((e,t)=>e+t.impactScore,0)/t.length:0;return{projectId:e.id,projectName:e.name,emoji:e.emoji,completedTasks:i,totalTasks:r,completionRate:r>0?i/r*100:0,avgImpact:a,projectROI:e.roiScore}}),k=o.filter(e=>"completed"!==e.status).map(e=>({taskId:e.id,taskName:e.name,...(0,l.PB)(e.impactScore,e.effortScore)})),v=k.filter(e=>"execute"===e.recommendation).slice(0,5),y=k.filter(e=>"eliminate"===e.recommendation);return n.NextResponse.json({success:!0,data:{summary:{totalTasks:o.length,completedTasks:s.length,inProgressTasks:u.length,blockedTasks:m.length,totalImpactDelivered:p,totalEffortSpent:d,avgROI:Math.round(100*g)/100},roiBreakdown:{quickWins:{count:f.quickWins.length,tasks:f.quickWins.map(e=>({id:e.id,name:e.name,roi:e.roiScore}))},strategic:{count:f.strategic.length,tasks:f.strategic.map(e=>({id:e.id,name:e.name,roi:e.roiScore}))},fillIns:{count:f.fillIns.length,tasks:f.fillIns.map(e=>({id:e.id,name:e.name,roi:e.roiScore}))},timeWasters:{count:f.timeWasters.length,tasks:f.timeWasters.map(e=>({id:e.id,name:e.name,roi:e.roiScore}))}},projectImpact:h,entjRecommendations:{executeNow:v,eliminate:y},insights:[{type:"impact",message:`You've delivered ${p} impact points this ${i}.`,trend:p>50?"positive":"neutral"},{type:"efficiency",message:`Average ROI: ${g.toFixed(1)}. ${g>=2?"Excellent efficiency!":"Consider focusing on higher-ROI tasks."}`,trend:g>=2?"positive":g>=1.5?"neutral":"negative"},{type:"warning",message:m.length>0?`${m.length} tasks are blocked. Review blockers to unlock progress.`:"No blocked tasks. Great work keeping things moving!",trend:m.length>0?"negative":"positive"}]}})}async function m(e){let t=await e.json();console.log("[API] POST /api/analytics/impact",t);let{taskId:i,impactType:r,impactValue:o,notes:a}=t;return n.NextResponse.json({success:!0,data:{logged:!0,taskId:i,impactType:r,impactValue:o,timestamp:Date.now()},message:"Impact event logged"})}let p=new o.AppRouteRouteModule({definition:{kind:a.x.APP_ROUTE,page:"/api/analytics/impact/route",pathname:"/api/analytics/impact",filename:"route",bundlePath:"app/api/analytics/impact/route"},resolvedPagePath:"/home/user/webapp/app/api/analytics/impact/route.ts",nextConfigOutput:"standalone",userland:r}),{requestAsyncStorage:d,staticGenerationAsyncStorage:g,serverHooks:f}=p,h="/api/analytics/impact/route";function k(){return(0,s.patchFetch)({serverHooks:f,staticGenerationAsyncStorage:g})}},650:(e,t,i)=>{function r(){return`${Date.now()}-${Math.random().toString(36).substr(2,9)}`}function o(e){for(let t of[/(?:youtube\.com\/watch\?v=|youtu\.be\/|youtube\.com\/embed\/)([a-zA-Z0-9_-]{11})/,/youtube\.com\/shorts\/([a-zA-Z0-9_-]{11})/]){let i=e.match(t);if(i)return i[1]}return null}function a(e){return`https://img.youtube.com/vi/${e}/mqdefault.jpg`}function s(e,t){let i,r;let o=0===t?10*e:Math.round(e/t*10)/10;return o>=2?(i="execute",r="critical"):o>=1.5?(i="execute",r="high"):o>=1?(i="delegate",r="medium"):(i=o>=.5?"defer":"eliminate",r="low"),{roi:o,recommendation:i,priority:r}}i.d(t,{Ox:()=>r,PB:()=>s,TO:()=>a,y1:()=>o})}};var t=require("../../../../webpack-runtime.js");t.C(e);var i=e=>t(t.s=e),r=t.X(0,[8948,5972,2839],()=>i(2652));module.exports=r})();