"use strict";(()=>{var e={};e.id=4871,e.ids=[4871],e.modules={399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},2493:(e,t,s)=>{s.r(t),s.d(t,{originalPathname:()=>P,patchFetch:()=>h,requestAsyncStorage:()=>l,routeModule:()=>m,serverHooks:()=>j,staticGenerationAsyncStorage:()=>g});var r={};s.r(r),s.d(r,{GET:()=>p,POST:()=>d});var a=s(9303),n=s(8716),o=s(670),i=s(7070),c=s(3493);let u={fetchProjects:async()=>(await c.Z.project.findMany()).map(e=>({id:e.id,name:e.name,description:e.description||"",status:e.status,progress:e.progress,members:e.members,dueDate:e.dueDate?.toISOString(),createdAt:e.createdAt.getTime(),updatedAt:e.updatedAt.getTime()})),createProject:async e=>{let t=await c.Z.project.create({data:{name:e.name||"New Project",description:e.description,status:e.status||"active",progress:e.progress||0,members:e.members||1,dueDate:e.dueDate?new Date(e.dueDate):void 0,userId:"user-1"}});return{id:t.id,name:t.name,description:t.description||"",status:t.status,progress:t.progress,members:t.members,dueDate:t.dueDate?.toISOString(),createdAt:t.createdAt.getTime(),updatedAt:t.updatedAt.getTime()}}};async function p(e){try{let{searchParams:t}=new URL(e.url),s=t.get("status"),r=parseInt(t.get("page")||"1"),a=parseInt(t.get("limit")||"20"),n=await u.fetchProjects(),o=n;s&&(o=n.filter(e=>e.status===s));let c=o.length,p=o.slice((r-1)*a,r*a);return i.NextResponse.json({data:p,total:c,page:r,limit:a,hasMore:r*a<c,success:!0})}catch(e){return i.NextResponse.json({success:!1,message:"Failed to fetch projects"},{status:500})}}async function d(e){try{let t=await e.json();if(!t.name)return i.NextResponse.json({success:!1,message:"Project name is required"},{status:400});let s=await u.createProject(t);return i.NextResponse.json({data:s,success:!0,message:"Project created successfully"})}catch(e){return i.NextResponse.json({success:!1,message:"Failed to create project"},{status:500})}}let m=new a.AppRouteRouteModule({definition:{kind:n.x.APP_ROUTE,page:"/api/projects/route",pathname:"/api/projects",filename:"route",bundlePath:"app/api/projects/route"},resolvedPagePath:"C:\\Users\\Luke\\Documents\\WORKSPACE\\FFWORKSPACEALL\\FFWORKSPACE\\AthenaPeX\\app\\api\\projects\\route.ts",nextConfigOutput:"standalone",userland:r}),{requestAsyncStorage:l,staticGenerationAsyncStorage:g,serverHooks:j}=m,P="/api/projects/route";function h(){return(0,o.patchFetch)({serverHooks:j,staticGenerationAsyncStorage:g})}},3493:(e,t,s)=>{s.d(t,{Z:()=>a});let r=require("@prisma/client"),a=globalThis.prisma??new r.PrismaClient}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[8948,5972],()=>s(2493));module.exports=r})();