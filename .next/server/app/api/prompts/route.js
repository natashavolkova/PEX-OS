"use strict";(()=>{var e={};e.id=7437,e.ids=[7437],e.modules={399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},9950:(e,t,r)=>{r.r(t),r.d(t,{originalPathname:()=>y,patchFetch:()=>A,requestAsyncStorage:()=>l,routeModule:()=>m,serverHooks:()=>f,staticGenerationAsyncStorage:()=>g});var a={};r.r(a),r.d(a,{GET:()=>c,POST:()=>u});var o=r(9303),s=r(8716),i=r(670),n=r(7070),d=r(3493);let p={fetchData:async()=>{let e=await d.Z.folder.findMany({include:{children:!0,prompts:!0}}),t=await d.Z.prompt.findMany();return[...e.map(e=>({id:e.id,name:e.name,type:"folder",emoji:e.emoji||void 0,isSystem:e.isSystem,children:[],createdAt:e.createdAt.getTime(),updatedAt:e.updatedAt.getTime()})),...t.map(e=>({id:e.id,name:e.title,type:"prompt",content:e.content,emoji:e.emoji||void 0,category:e.category||void 0,tags:e.tags,date:e.createdAt.toISOString(),createdAt:e.createdAt.getTime(),updatedAt:e.updatedAt.getTime(),folderId:e.folderId}))]},createPrompt:async e=>{let t=await d.Z.prompt.create({data:{title:e.name||"Untitled Prompt",content:e.content||"",type:"prompt",emoji:e.emoji,category:e.category,tags:e.tags||[],userId:"user-1",folderId:void 0}});return{id:t.id,name:t.title,type:"prompt",content:t.content,emoji:t.emoji||void 0,category:t.category||void 0,tags:t.tags,date:t.createdAt.toISOString(),createdAt:t.createdAt.getTime(),updatedAt:t.updatedAt.getTime()}}};async function c(e){try{let{searchParams:t}=new URL(e.url),r=t.get("folderId")||void 0,a=t.get("search")||void 0,o=t.get("tags")?t.get("tags")?.split(","):void 0,s=(await p.fetchData()).filter(e=>"prompt"===e.type);if(r&&(s=s.filter(e=>e.folderId===r)),a){let e=a.toLowerCase();s=s.filter(t=>t.title.toLowerCase().includes(e)||t.content.toLowerCase().includes(e))}return o&&o.length>0&&(s=s.filter(e=>e.tags&&e.tags.some(e=>o.includes(e)))),n.NextResponse.json({data:s,total:s.length,success:!0})}catch(e){return n.NextResponse.json({success:!1,message:"Failed to fetch prompts"},{status:500})}}async function u(e){try{let t=await e.json();if(!t.title||!t.content)return n.NextResponse.json({success:!1,message:"Title and content are required"},{status:400});let r=await p.createPrompt(t);return n.NextResponse.json({data:r,success:!0,message:"Prompt created successfully"})}catch(e){return console.error("Create prompt error:",e),n.NextResponse.json({success:!1,message:"Failed to create prompt"},{status:500})}}let m=new o.AppRouteRouteModule({definition:{kind:s.x.APP_ROUTE,page:"/api/prompts/route",pathname:"/api/prompts",filename:"route",bundlePath:"app/api/prompts/route"},resolvedPagePath:"C:\\Users\\Luke\\Documents\\WORKSPACE\\FFWORKSPACEALL\\FFWORKSPACE\\AthenaPeX\\app\\api\\prompts\\route.ts",nextConfigOutput:"standalone",userland:a}),{requestAsyncStorage:l,staticGenerationAsyncStorage:g,serverHooks:f}=m,y="/api/prompts/route";function A(){return(0,i.patchFetch)({serverHooks:f,staticGenerationAsyncStorage:g})}},3493:(e,t,r)=>{r.d(t,{Z:()=>o});let a=require("@prisma/client"),o=globalThis.prisma??new a.PrismaClient}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),a=t.X(0,[8948,5972],()=>r(9950));module.exports=a})();