(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[650],{1650:function(e,t,r){"use strict";r.d(t,{C:function(){return ta}});var s=r(7437),a=r(2265),n=r(5574),i=r(212),l=r(1100),o=r(5489),d=r(6600),c=r(4258),x=r(9896),u=r(5931),m=r(4817),h=r(1240),p=r(7893),g=r(3124),f=r(1568);let b={top:"bottom-full left-1/2 -translate-x-1/2 mb-2",bottom:"top-full left-1/2 -translate-x-1/2 mt-2",left:"right-full top-1/2 -translate-y-1/2 mr-2",right:"left-full top-1/2 -translate-y-1/2 ml-2"},j={top:"bottom-[-4px] left-1/2 -translate-x-1/2 border-b border-r",bottom:"top-[-4px] left-1/2 -translate-x-1/2 border-t border-l",left:"right-[-4px] top-1/2 -translate-y-1/2 border-t border-r",right:"left-[-4px] top-1/2 -translate-y-1/2 border-b border-l"},v={top:"animate-in fade-in slide-in-from-bottom-1",bottom:"animate-in fade-in slide-in-from-top-1",left:"animate-in fade-in slide-in-from-right-1",right:"animate-in fade-in slide-in-from-left-1"},w=e=>{let{children:t,content:r,position:n="top",delay:i=150,disabled:l=!1}=e,[o,d]=(0,a.useState)(!1),c=(0,a.useRef)(null);return(0,a.useEffect)(()=>()=>{c.current&&clearTimeout(c.current)},[]),(0,s.jsxs)("div",{className:"relative inline-flex",onMouseEnter:()=>{l||(c.current=setTimeout(()=>{d(!0)},i))},onMouseLeave:()=>{c.current&&clearTimeout(c.current),d(!1)},children:[t,o&&r&&(0,s.jsxs)("div",{className:"\n            absolute z-[100] px-3 py-2 text-xs font-medium text-white \n            bg-[#1e2330] border border-white/10 rounded-lg shadow-2xl shadow-black/50\n            whitespace-nowrap pointer-events-none duration-150\n            ".concat(b[n],"\n            ").concat(v[n],"\n          "),children:[r,(0,s.jsx)("div",{className:"\n              absolute w-2 h-2 bg-[#1e2330] border-white/10 rotate-45\n              ".concat(j[n],"\n            ")})]})]})},y=e=>{let{children:t,label:r,shortcut:a,position:n="top"}=e;return(0,s.jsx)(w,{position:n,content:(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("span",{children:r}),a&&(0,s.jsx)("kbd",{className:"text-[10px] font-mono bg-white/10 px-1.5 py-0.5 rounded border border-white/10",children:a})]}),children:t})};var N=r(9099),D=r(9291);let C=()=>Math.random().toString(36).substring(2,10).toUpperCase()+"-"+Date.now().toString().substring(8),k=(e,t)=>{for(let r of e){if(r.id===t)return r;if("folder"===r.type&&r.children){let e=k(r.children,t);if(e)return e}}return null},z=(e,t)=>e.filter(e=>e.id!==t&&("folder"===e.type&&e.children&&(e.children=z(e.children,t)),!0)),S=(e,t,r)=>t?e.map(e=>e.id===t&&"folder"===e.type?{...e,children:[r,...e.children||[]]}:"folder"===e.type&&e.children?{...e,children:S(e.children,t,r)}:e):[r,...e],Z=(e,t,r)=>e.map(e=>e.id===t?(e.type,{...e,...r,updatedAt:Date.now()}):"folder"===e.type&&e.children?{...e,children:Z(e.children,t,r)}:e),E="MASTER-ADMIN-001",I=[{id:"f1",name:"Pastas Principais",type:"folder",emoji:"\uD83D\uDDC2️",children:[{id:"f1-1",name:"System Prompts",type:"folder",emoji:"⚙️",isSystem:!0,children:[{id:"p1",name:"Prompt Base ENTJ",type:"prompt",emoji:"\uD83E\uDD16",content:"Voc\xea \xe9 ATHENA, uma arquiteta ENTJ m\xe1xima...",tags:["system","core"],category:"System",date:new Date().toLocaleDateString("pt-BR")},{id:"p2",name:"Coding Assistant",type:"prompt",emoji:"\uD83D\uDC68‍\uD83D\uDCBB",content:"Expert React/TypeScript developer...",tags:["dev","code"],category:"Development",date:new Date().toLocaleDateString("pt-BR")}]},{id:"f1-2",name:"Marketing Campaigns",type:"folder",emoji:"\uD83D\uDE80",children:[]}]},{id:"f2",name:"Personal Space",type:"folder",emoji:"\uD83D\uDD12",children:[{id:"p3",name:"Operational Logs",type:"prompt",emoji:"\uD83D\uDEE1️",content:"Daily operations log template...",tags:["personal","logs"],category:"Ops",date:new Date().toLocaleDateString("pt-BR")}]}],P={name:"Natasha (ENTJ)",role:"master",keyId:E,avatar:null},L={defaultView:"sequential",theme:"dark",compactMode:!1,showTags:!0},T=[{id:1,title:"Acesso Concedido",description:'Ana Silva compartilhou "Design Assets".',time:"2 min",type:"share",read:!1},{id:2,title:"Sistema",description:"Backup autom\xe1tico realizado.",time:"3h",type:"system",read:!0}],M=(0,N.Ue)()((0,D.mW)((0,D.tJ)((e,t)=>({data:I,sharedData:[],selectedFolder:null,selectedSubfolder:null,selectedPrompt:null,activeView:"sequential",lastMainView:"sequential",sequentialPath:[],slideDirection:"none",isLocked:!0,isLoading:!1,searchQuery:"",toast:null,dragState:{draggedItemId:null,draggedItemType:null,dropTargetId:null},moveSelector:{open:!1,draggedId:null,draggedType:null,availableTargets:[]},justDroppedId:null,editModal:{isOpen:!1,item:null,isFullEdit:!1,isImport:!1},isSettingsOpen:!1,isNotificationsOpen:!1,isHistoryOpen:!1,isMasterLoginOpen:!1,isPromptViewerOpen:!1,currentUser:P,preferences:L,notifications:T,generatedKeys:[{id:"master",userName:"Natasha (Admin)",key:E,active:!0}],masterKey:E,actions:{setData:t=>e({data:t}),addItem:function(t){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return e(e=>({data:S(e.data,r,t)}))},updateItem:(t,r)=>e(e=>({data:Z(e.data,t,r)})),deleteItem:r=>{let s=t(),a=s.actions.findItem(r),n=(null==a?void 0:a.name)||"Item";e(e=>{var t,s,a;return{data:z(e.data,r),selectedFolder:(null===(t=e.selectedFolder)||void 0===t?void 0:t.id)===r?null:e.selectedFolder,selectedSubfolder:(null===(s=e.selectedSubfolder)||void 0===s?void 0:s.id)===r?null:e.selectedSubfolder,selectedPrompt:(null===(a=e.selectedPrompt)||void 0===a?void 0:a.id)===r?null:e.selectedPrompt}}),s.actions.showToast('"'.concat(n,'" exclu\xeddo!'),"success")},moveItem:(r,s)=>{let a=t(),n=a.actions.findItem(r);if(n){if("folder"===n.type&&s&&a.actions.isDescendant(r,s)){a.actions.showToast("N\xe3o \xe9 poss\xedvel mover uma pasta para dentro de si mesma.","error");return}e(e=>{let t=z([...e.data],r);return{data:t=S(t,s,n),justDroppedId:r}}),setTimeout(()=>e({justDroppedId:null}),300)}},importPackage:function(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,s={...e,id:"imported-".concat(Date.now()),updatedAt:Date.now()};t().actions.addItem(s,r),t().actions.showToast("Pacote importado com sucesso!","success")},setSelectedFolder:t=>e({selectedFolder:t,selectedSubfolder:null,selectedPrompt:null}),setSelectedSubfolder:t=>e({selectedSubfolder:t,selectedPrompt:null}),setSelectedPrompt:t=>e({selectedPrompt:t}),clearSelection:()=>e({selectedFolder:null,selectedSubfolder:null,selectedPrompt:null}),setActiveView:t=>e(e=>({activeView:t,lastMainView:"shared"!==t?t:e.lastMainView,sequentialPath:"sequential"===t?[]:e.sequentialPath})),navigateToFolder:t=>e(e=>({sequentialPath:[...e.sequentialPath,t.id],slideDirection:"left"})),navigateToIndex:t=>e(e=>({sequentialPath:e.sequentialPath.slice(0,t+1),slideDirection:"right"})),goBack:()=>e(e=>({sequentialPath:e.sequentialPath.slice(0,-1),slideDirection:"right"})),goToRoot:()=>e({sequentialPath:[],slideDirection:"right"}),setIsLocked:r=>{e({isLocked:r}),t().actions.showToast(r?"Bloqueado":"Desbloqueado","info")},setIsLoading:t=>e({isLoading:t}),setSearchQuery:t=>e({searchQuery:t}),showToast:(t,r)=>{e({toast:{message:t,type:r}}),setTimeout(()=>e({toast:null}),3e3)},clearToast:()=>e({toast:null}),setJustDroppedId:t=>e({justDroppedId:t}),setDragState:t=>e(e=>({dragState:{...e.dragState,...t}})),setMoveSelector:t=>e(e=>({moveSelector:{...e.moveSelector,...t}})),closeMoveSelector:()=>e({moveSelector:{open:!1,draggedId:null,draggedType:null,availableTargets:[]}}),openEditModal:function(t){let r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],s=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return e({editModal:{isOpen:!0,item:t,isFullEdit:r,isImport:s}})},closeEditModal:()=>e({editModal:{isOpen:!1,item:null,isFullEdit:!1,isImport:!1}}),setSettingsOpen:t=>e({isSettingsOpen:t}),setNotificationsOpen:t=>e({isNotificationsOpen:t}),setHistoryOpen:t=>e({isHistoryOpen:t}),setMasterLoginOpen:t=>e({isMasterLoginOpen:t}),setPromptViewerOpen:t=>e({isPromptViewerOpen:t}),setCurrentUser:t=>e({currentUser:t}),updatePreferences:t=>e(e=>({preferences:{...e.preferences,...t}})),login:(r,s)=>{let a=t(),n=a.generatedKeys.find(e=>e.key===s&&e.userName===r&&e.active);return s===a.masterKey?(e({currentUser:{...P}}),!0):!!n&&(e({currentUser:{name:r,role:"user",keyId:s,avatar:null}}),t().actions.showToast("Bem-vindo, ".concat(r,"!"),"success"),!0)},logout:()=>e({currentUser:P}),addNotification:t=>e(e=>({notifications:[{...t,id:Date.now()},...e.notifications]})),markNotificationRead:t=>e(e=>({notifications:e.notifications.map(e=>e.id===t?{...e,read:!0}:e)})),markAllNotificationsRead:()=>e(e=>({notifications:e.notifications.map(e=>({...e,read:!0}))})),clearNotifications:()=>e({notifications:[]}),generateKey:r=>{let s=C(),a={id:Date.now().toString(),userName:r,key:s,active:!0,createdAt:Date.now()};return e(e=>({generatedKeys:[...e.generatedKeys,a]})),t().actions.showToast("Chave gerada para ".concat(r),"success"),s},revokeKey:t=>e(e=>({generatedKeys:e.generatedKeys.map(e=>e.id===t?{...e,active:!1}:e)})),validateKey:e=>t().generatedKeys.find(t=>t.key===e&&t.active)||null,findItem:e=>k(t().data,e),getValidMoveTargets:e=>{let r=[],s=t=>{for(let a of t)a.id!==e&&"folder"===a.type&&(r.push(a),a.children&&s(a.children))};return s(t().data),r},isDescendant:(e,r)=>{let s=t().actions.findItem(e);if(!s||"folder"!==s.type)return!1;let a=e=>{for(let t of e)if(t.id===r||"folder"===t.type&&t.children&&a(t.children))return!0;return!1};return a(s.children||[])},getCurrentSequentialNodes:()=>{let e=t(),r=e.data,s=null,a="Pastas Principais";for(let t of e.sequentialPath){let e=r.find(e=>e.id===t);if(!e||"folder"!==e.type||!e.children)return{nodes:[],title:"Erro",currentItem:null};s=e,r=e.children,a=e.name}return{nodes:r,title:a,currentItem:s}}}}),{name:"pex-os-prompt-manager",partialize:e=>({data:e.data,preferences:e.preferences,generatedKeys:e.generatedKeys})}),{name:"PromptManager"})),A=[{id:"sequential",label:"Sequencial",icon:n.Z},{id:"miller",label:"Colunas",icon:i.Z},{id:"mindmap",label:"Hierarquia",icon:l.Z}],q=()=>{let[e,t]=a.useState(!1),r=a.useRef(null),n=M(e=>e.currentUser),i=M(e=>e.notifications),{setSettingsOpen:l,setNotificationsOpen:u,setMasterLoginOpen:m,logout:h}=M(e=>e.actions),p=i.filter(e=>!e.read).length,g="master"===n.role&&n.keyId;a.useEffect(()=>{let e=e=>{r.current&&!r.current.contains(e.target)&&t(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]);let f=(e=>{let t=e.replace(/[^a-zA-Z\s]/g,"").trim().split(/\s+/);return 0===t.length?"??":1===t.length?t[0].substring(0,2).toUpperCase():(t[0][0]+t[t.length-1][0]).toUpperCase()})(n.name);return(0,s.jsxs)("div",{className:"relative",ref:r,children:[(0,s.jsxs)("button",{onClick:()=>t(!e),className:"group w-8 h-8 ml-2 relative outline-none cursor-pointer focus:outline-none focus:ring-2 focus:ring-[#2979ff] rounded-full",title:"Meu Perfil",children:[(0,s.jsx)("div",{className:"\n            w-full h-full rounded-full bg-gradient-to-br from-[#2a3040] to-[#1e2330] \n            flex items-center justify-center text-[10px] font-bold tracking-wide \n            border transition-all shadow-inner text-indigo-400 overflow-hidden\n            ".concat(e?"border-[#2979ff] ring-2 ring-[#2979ff]/20":"border-white/10 group-hover:border-white/30","\n          "),children:n.avatar?(0,s.jsx)("img",{src:n.avatar,alt:"Avatar",className:"w-full h-full object-cover"}):f}),p>0&&!e&&(0,s.jsx)("span",{className:"absolute -top-0.5 -right-0.5 w-3 h-3 bg-red-500 border-2 border-[#0f111a] rounded-full z-10"})]}),e&&(0,s.jsxs)("div",{className:"absolute top-full right-0 mt-3 w-60 bg-[#1e2330] border border-white/10 rounded-xl shadow-2xl shadow-black/50 z-50 overflow-hidden ring-1 ring-white/5 origin-top-right animate-pop-in-menu",children:[(0,s.jsx)("div",{className:"p-4 border-b border-white/5 bg-[#252b3b]/50",children:(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"\n                  w-9 h-9 rounded-full flex items-center justify-center text-white font-bold text-xs \n                  shadow-lg overflow-hidden shrink-0\n                  ".concat("master"===n.role?"bg-gradient-to-br from-red-600 to-orange-600":"bg-gradient-to-br from-indigo-500 to-blue-600","\n                "),children:n.avatar?(0,s.jsx)("img",{src:n.avatar,alt:"Avatar",className:"w-full h-full object-cover"}):f}),(0,s.jsxs)("div",{className:"min-w-0",children:[(0,s.jsx)("h4",{className:"text-xs font-bold text-white truncate",children:n.name}),(0,s.jsx)("span",{className:"\n                    text-[10px] px-1.5 py-0.5 rounded-full inline-block mt-0.5\n                    ".concat("master"===n.role?"bg-red-500/20 text-red-300":"bg-blue-500/20 text-blue-300","\n                  "),children:"master"===n.role?"Master Admin":"User"})]})]})}),(0,s.jsxs)("div",{className:"p-1 space-y-0.5",children:[g&&(0,s.jsxs)("button",{onClick:()=>{t(!1),m(!0)},className:"w-full text-left px-3 py-2 text-xs font-medium bg-red-500/5 hover:bg-red-500/10 text-red-400 hover:text-red-300 rounded-lg flex items-center gap-3 transition-all mb-1",children:[(0,s.jsx)(o.Z,{size:14,className:"shrink-0"})," Master Access"]}),(0,s.jsxs)("button",{onClick:()=>{u(!0),t(!1)},className:"w-full text-left px-3 py-2 text-xs font-medium text-gray-300 hover:bg-white/5 hover:text-white rounded-lg flex items-center gap-3 transition-colors",children:[(0,s.jsx)(d.Z,{size:14,className:"shrink-0 text-gray-400"}),(0,s.jsx)("span",{className:"flex-1",children:"Notifica\xe7\xf5es"}),p>0&&(0,s.jsx)("span",{className:"flex items-center justify-center bg-red-500 text-white text-[9px] font-bold h-4 min-w-[16px] px-1 rounded-full shadow-sm",children:p})]}),(0,s.jsxs)("button",{onClick:()=>{l(!0),t(!1)},className:"w-full text-left px-3 py-2 text-xs font-medium text-gray-300 hover:bg-white/5 hover:text-white rounded-lg flex items-center gap-3 transition-colors",children:[(0,s.jsx)(c.Z,{size:14,className:"shrink-0 text-gray-400"})," Configura\xe7\xf5es"]})]}),(0,s.jsx)("div",{className:"p-1 border-t border-white/5 mt-0.5",children:(0,s.jsxs)("button",{onClick:()=>{t(!1),h()},className:"w-full text-left px-3 py-2 text-xs font-medium text-gray-300 hover:bg-white/5 hover:text-white rounded-lg flex items-center gap-3 transition-colors",children:[(0,s.jsx)(x.Z,{size:14,className:"shrink-0"}),"master"===n.role?"Sair da Conta":"Sair da Sess\xe3o"]})})]})]})},F=()=>{let e=M(e=>e.activeView),t=M(e=>e.isLocked),r=M(e=>e.searchQuery),a=M(e=>e.notifications),{setActiveView:n,setSearchQuery:i,setIsLocked:l,setNotificationsOpen:o,setHistoryOpen:c}=M(e=>e.actions),x=a.filter(e=>!e.read).length;return(0,s.jsxs)("header",{className:"h-14 bg-[#1e2330] border-b border-white/5 flex items-center justify-between px-4 shrink-0 z-20 relative",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 text-white font-bold text-lg tracking-tight",children:[(0,s.jsx)("div",{className:"w-8 h-8 bg-gradient-to-br from-[#2979ff] to-[#1e2330] rounded-lg flex items-center justify-center shadow-lg shadow-blue-900/20",children:(0,s.jsx)(u.Z,{size:18,className:"text-white"})}),(0,s.jsx)("span",{className:"hidden sm:inline",children:"Prompt Manager"})]}),(0,s.jsxs)("div",{className:"relative group hidden md:block",children:[(0,s.jsx)(m.Z,{size:14,className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500 group-focus-within:text-[#2979ff] transition-colors"}),(0,s.jsx)("input",{id:"search-input",type:"text",placeholder:"Buscar (Ctrl+F)...",value:r,onChange:e=>i(e.target.value),className:"h-9 w-64 bg-[#0f111a] border border-white/10 rounded-lg pl-9 pr-3 text-xs text-gray-300 focus:outline-none focus:border-[#2979ff] focus:w-80 transition-all placeholder-gray-600"}),(0,s.jsxs)("div",{className:"absolute right-2 top-1/2 -translate-y-1/2 flex gap-1 pointer-events-none",children:[(0,s.jsx)("span",{className:"text-[10px] font-mono text-gray-600 border border-white/5 px-1 rounded bg-white/5",children:"Ctrl"}),(0,s.jsx)("span",{className:"text-[10px] font-mono text-gray-600 border border-white/5 px-1 rounded bg-white/5",children:"F"})]})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsxs)("div",{className:"flex items-center gap-1 bg-[#0f111a] p-1 rounded-lg border border-white/5 mr-2",children:[A.map(t=>(0,s.jsx)(w,{content:t.label,position:"bottom",children:(0,s.jsx)("button",{onClick:()=>n(t.id),className:"\n                  p-1.5 rounded transition-all relative\n                  ".concat(e===t.id?"bg-[#2979ff] text-white shadow-lg":"text-gray-400 hover:text-white hover:bg-white/5","\n                "),children:(0,s.jsx)(t.icon,{size:16})})},t.id)),(0,s.jsx)(w,{content:"Compartilhados",position:"bottom",children:(0,s.jsx)("button",{onClick:()=>n("shared"),className:"\n                p-1.5 rounded transition-all relative\n                ".concat("shared"===e?"bg-[#5b4eff] text-white shadow-lg":"text-gray-400 hover:text-white hover:bg-white/5","\n              "),children:(0,s.jsx)(h.Z,{size:16})})})]}),(0,s.jsx)(y,{label:t?"Desbloquear Edi\xe7\xe3o":"Bloquear Edi\xe7\xe3o",shortcut:"Ctrl+L",position:"bottom",children:(0,s.jsx)("button",{onClick:()=>l(!t),className:"\n              p-2 rounded-lg transition-all\n              ".concat(t?"text-red-400 bg-red-500/10 hover:bg-red-500/20":"text-green-400 bg-green-500/10 hover:bg-green-500/20","\n            "),children:t?(0,s.jsx)(p.Z,{size:18}):(0,s.jsx)(g.Z,{size:18})})}),(0,s.jsx)(w,{content:"Notifica\xe7\xf5es",position:"bottom",children:(0,s.jsxs)("button",{onClick:()=>o(!0),className:"p-2 text-gray-400 hover:text-white hover:bg-white/5 rounded-lg transition-colors relative",children:[(0,s.jsx)(d.Z,{size:18}),x>0&&(0,s.jsx)("span",{className:"absolute top-1.5 right-1.5 w-2 h-2 bg-red-500 rounded-full border-2 border-[#1e2330]"})]})}),(0,s.jsx)(w,{content:"Hist\xf3rico",position:"bottom",children:(0,s.jsx)("button",{onClick:()=>c(!0),className:"p-2 text-gray-400 hover:text-white hover:bg-white/5 rounded-lg transition-colors",children:(0,s.jsx)(f.Z,{size:18})})}),(0,s.jsx)("div",{className:"h-6 w-px bg-white/10 mx-1"}),(0,s.jsx)(q,{})]})]})};var O=r(6244),R=r(4781),B=r(7164),K=r(8184),U=r(1510),V=r(7422),_=r(883),H=r(2513);let J=r(357).env.NEXT_PUBLIC_API_URL||"/api";class Q{async get(e){try{let t=await fetch("".concat(this.baseUrl).concat(e));return await t.json()}catch(e){return console.error("API request error:",e),{data:null,success:!1}}}constructor(e){this.baseUrl=e}}let G=new Q(J),X={async createBackup(){let e=(await G.get("/prompts")).data||[],t=new Blob([JSON.stringify({version:"1.0.0",timestamp:Date.now(),data:e},null,2)],{type:"application/json"});return URL.createObjectURL(t)},async restoreBackup(e){try{let t=await e.text(),r=JSON.parse(t);if(!r.data||!Array.isArray(r.data))throw Error("Invalid backup format");return!0}catch(e){return console.error("Restore backup error:",e),!1}},downloadBackup(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"pex-os-backup.json",r=document.createElement("a");r.href=e,r.download=t,document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(e)}},Y=e=>{let{className:t="",variant:r="default"}=e,a=M(e=>e.isLocked),n=M(e=>e.selectedFolder),i=M(e=>e.selectedPrompt),{showToast:l,openEditModal:o}=M(e=>e.actions),d=()=>{if(a){l("Desbloqueie para criar pastas","warning");return}l("Criar nova pasta...","info")},c=()=>{if(a){l("Desbloqueie para criar prompts","warning");return}l("Criar novo prompt...","info")},x=async()=>{try{let e=await X.createBackup();X.downloadBackup(e,"pex-os-backup-".concat(Date.now(),".json")),l("Backup exportado com sucesso!","success")}catch(e){l("Erro ao exportar backup","error")}},u=()=>{let e=document.createElement("input");e.type="file",e.accept=".json",e.onchange=async e=>{var t;let r=null===(t=e.target.files)||void 0===t?void 0:t[0];r&&(await X.restoreBackup(r)?(l("Backup restaurado com sucesso!","success"),window.location.reload()):l("Erro ao restaurar backup","error"))},e.click()},m=()=>{if(!n&&!i){l("Selecione um item para compartilhar","warning");return}l("Compartilhando...","info")},h=()=>{if(!n&&!i){l("Selecione um item para gerar link","warning");return}let e=i||n,t="".concat(window.location.origin,"/share/").concat(null==e?void 0:e.id);navigator.clipboard.writeText(t),l("Link copiado!","success")},p=()=>{if(a){l("Desbloqueie para deletar","warning");return}if(!n&&!i){l("Selecione um item para deletar","warning");return}l("Confirmar exclus\xe3o?","warning")},g="\n    flex items-center justify-center gap-2 px-4 py-2 \n    bg-[#2979ff] hover:bg-[#2264d1] text-white \n    text-xs font-bold rounded-lg transition-all \n    shadow-lg shadow-blue-900/20 hover:shadow-blue-900/40 \n    active:scale-[0.98] disabled:opacity-50 disabled:cursor-not-allowed\n  ",f="\n    flex items-center justify-center gap-2 px-3 py-2 \n    bg-[#1e2330] hover:bg-white/10 text-gray-300 hover:text-white\n    text-xs font-medium rounded-lg transition-all \n    border border-white/10 hover:border-white/20\n    active:scale-[0.98]\n  ",b="\n    p-2 rounded-lg transition-all\n    text-gray-400 hover:text-white hover:bg-white/10\n    active:scale-[0.95]\n  ";return"compact"===r?(0,s.jsxs)("div",{className:"flex items-center gap-1 ".concat(t),children:[(0,s.jsx)(w,{content:"Nova Pasta",position:"bottom",children:(0,s.jsx)("button",{onClick:d,className:b,disabled:a,children:(0,s.jsx)(O.Z,{size:16})})}),(0,s.jsx)(w,{content:"Novo Prompt",position:"bottom",children:(0,s.jsx)("button",{onClick:c,className:b,disabled:a,children:(0,s.jsx)(R.Z,{size:16})})}),(0,s.jsx)("div",{className:"w-px h-4 bg-white/10 mx-1"}),(0,s.jsx)(w,{content:"Exportar",position:"bottom",children:(0,s.jsx)("button",{onClick:x,className:b,children:(0,s.jsx)(B.Z,{size:16})})}),(0,s.jsx)(w,{content:"Importar",position:"bottom",children:(0,s.jsx)("button",{onClick:u,className:b,children:(0,s.jsx)(K.Z,{size:16})})})]}):"expanded"===r?(0,s.jsxs)("div",{className:"flex flex-col gap-2 p-4 bg-[#1e2330] rounded-xl border border-white/10 ".concat(t),children:[(0,s.jsx)("h3",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest mb-2",children:"A\xe7\xf5es R\xe1pidas"}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,s.jsxs)("button",{onClick:d,className:g,disabled:a,children:[(0,s.jsx)(O.Z,{size:14})," Nova Pasta"]}),(0,s.jsxs)("button",{onClick:c,className:g,disabled:a,children:[(0,s.jsx)(R.Z,{size:14})," Novo Prompt"]})]}),(0,s.jsx)("div",{className:"h-px bg-white/5 my-2"}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,s.jsxs)("button",{onClick:x,className:f,children:[(0,s.jsx)(B.Z,{size:14})," Exportar"]}),(0,s.jsxs)("button",{onClick:u,className:f,children:[(0,s.jsx)(K.Z,{size:14})," Importar"]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,s.jsxs)("button",{onClick:m,className:f,children:[(0,s.jsx)(U.Z,{size:14})," Compartilhar"]}),(0,s.jsxs)("button",{onClick:h,className:f,children:[(0,s.jsx)(V.Z,{size:14})," Copiar Link"]})]}),(0,s.jsx)("div",{className:"h-px bg-white/5 my-2"}),(0,s.jsxs)("button",{onClick:p,className:"".concat(f," text-red-400 hover:text-red-300 hover:bg-red-500/10 hover:border-red-500/20"),disabled:a,children:[(0,s.jsx)(_.Z,{size:14})," Excluir Selecionado"]})]}):(0,s.jsxs)("div",{className:"flex items-center gap-2 ".concat(t),children:[(0,s.jsxs)("div",{className:"flex items-center gap-1 bg-[#0f111a] p-1 rounded-lg border border-white/5",children:[(0,s.jsx)(y,{label:"Nova Pasta",shortcut:"Ctrl+N",position:"bottom",children:(0,s.jsx)("button",{onClick:d,className:b,disabled:a,children:(0,s.jsx)(O.Z,{size:16})})}),(0,s.jsx)(y,{label:"Novo Prompt",shortcut:"Ctrl+P",position:"bottom",children:(0,s.jsx)("button",{onClick:c,className:b,disabled:a,children:(0,s.jsx)(R.Z,{size:16})})})]}),(0,s.jsxs)("div",{className:"flex items-center gap-1 bg-[#0f111a] p-1 rounded-lg border border-white/5",children:[(0,s.jsx)(w,{content:"Exportar Backup",position:"bottom",children:(0,s.jsx)("button",{onClick:x,className:b,children:(0,s.jsx)(B.Z,{size:16})})}),(0,s.jsx)(w,{content:"Importar Backup",position:"bottom",children:(0,s.jsx)("button",{onClick:u,className:b,children:(0,s.jsx)(K.Z,{size:16})})})]}),(0,s.jsxs)("div",{className:"flex items-center gap-1 bg-[#0f111a] p-1 rounded-lg border border-white/5",children:[(0,s.jsx)(w,{content:"Compartilhar",position:"bottom",children:(0,s.jsx)("button",{onClick:m,className:b,children:(0,s.jsx)(U.Z,{size:16})})}),(0,s.jsx)(w,{content:"Copiar Link",position:"bottom",children:(0,s.jsx)("button",{onClick:h,className:b,children:(0,s.jsx)(V.Z,{size:16})})})]}),(0,s.jsx)(w,{content:"Excluir",position:"bottom",children:(0,s.jsx)("button",{onClick:p,className:"".concat(b," hover:text-red-400 hover:bg-red-500/10"),disabled:a,children:(0,s.jsx)(_.Z,{size:16})})})]})},W=e=>{let{className:t=""}=e,[r,n]=a.useState(!1),i=M(e=>e.isLocked),{showToast:l}=M(e=>e.actions);return(0,s.jsxs)("div",{className:"fixed bottom-6 right-6 z-50 ".concat(t),children:[r&&(0,s.jsxs)("div",{className:"absolute bottom-16 right-0 flex flex-col gap-2 animate-slide-up-fade",children:[(0,s.jsx)(w,{content:"Nova Pasta",position:"left",children:(0,s.jsx)("button",{onClick:()=>{if(i){l("Desbloqueie para criar","warning");return}l("Criar pasta...","info"),n(!1)},className:"w-12 h-12 rounded-full bg-[#1e2330] border border-white/10 shadow-lg flex items-center justify-center text-gray-300 hover:text-white hover:bg-[#2979ff]/10 hover:border-[#2979ff]/50 transition-all",children:(0,s.jsx)(O.Z,{size:20})})}),(0,s.jsx)(w,{content:"Novo Prompt",position:"left",children:(0,s.jsx)("button",{onClick:()=>{if(i){l("Desbloqueie para criar","warning");return}l("Criar prompt...","info"),n(!1)},className:"w-12 h-12 rounded-full bg-[#1e2330] border border-white/10 shadow-lg flex items-center justify-center text-gray-300 hover:text-white hover:bg-[#2979ff]/10 hover:border-[#2979ff]/50 transition-all",children:(0,s.jsx)(R.Z,{size:20})})})]}),(0,s.jsx)("button",{onClick:()=>n(!r),className:"\n          w-14 h-14 rounded-full shadow-2xl flex items-center justify-center\n          transition-all duration-300\n          ".concat(r?"bg-[#1e2330] text-white rotate-45":"bg-[#2979ff] text-white hover:bg-[#2264d1]","\n        "),children:(0,s.jsx)(H.Z,{size:24})})]})};var $=r(9913),ee=r(5137),et=r(3852),er=r(1863),es=r(7592);let ea=e=>{let{children:t,isExpanded:r}=e;return(0,s.jsx)("div",{style:{transition:"grid-template-rows 200ms ease-out, opacity 200ms ease-out",gridTemplateRows:r?"1fr":"0fr",opacity:r?1:0,overflow:"hidden"},className:"grid",children:(0,s.jsx)("div",{className:"min-h-0",children:t})})},en=e=>{let{children:t,direction:r,className:a=""}=e;return(0,s.jsx)("div",{className:"".concat({left:"animate-slide-left",right:"animate-slide-right",none:"animate-in fade-in zoom-in-95 duration-300"}[r]," ").concat(a),children:t})},ei=e=>{let{children:t,className:r=""}=e;return(0,s.jsx)("div",{className:"animate-modal-bounce ".concat(r),children:t})},el=e=>{let{children:t,onClick:r,onMouseDown:a,onMouseUp:n,className:i=""}=e;return(0,s.jsx)("div",{className:"\n        fixed inset-0 z-[200] flex items-center justify-center \n        bg-black/70 backdrop-blur-sm \n        animate-in fade-in duration-200\n        ".concat(i,"\n      "),onClick:r,onMouseDown:a,onMouseUp:n,children:t})},eo=e=>{let{item:t,index:r,onNavigate:a,onSelectPrompt:n,onEdit:i,onShare:l,onDragStart:o,onDragOver:d,onDragLeave:c,onDrop:x,isLocked:u,isDragging:m,isJustDropped:h}=e,p="folder"===t.type;return(0,s.jsxs)("div",{draggable:!u,onDragStart:e=>o(e,t),onDragOver:d,onDragLeave:c,onDrop:e=>x(e,t),onClick:()=>p?a(t):n(t),tabIndex:0,onKeyDown:e=>{("Enter"===e.key||" "===e.key)&&(e.preventDefault(),p?a(t):n(t))},className:"\n        group relative flex flex-col justify-between min-h-[160px] w-fit min-w-[260px] max-w-[280px] shrink-0\n        rounded-xl border-l-[6px] border-y border-r px-3.5 py-3 cursor-pointer transition-all duration-200 \n        shadow-xl shadow-black/20 hover:scale-[1.01]\n        ".concat(p?"bg-gradient-to-br from-[#2979ff]/8 via-[#2979ff]/3 to-transparent border-l-[#2979ff] border-y-[#2979ff]/20 border-r-[#2979ff]/20 hover:shadow-[0_0_30px_rgba(41,121,255,0.15)]":"bg-gradient-to-br from-[#10b981]/8 via-[#10b981]/3 to-transparent border-l-[#10b981] border-y-[#10b981]/20 border-r-[#10b981]/20 hover:shadow-[0_0_30px_rgba(16,185,129,0.15)]","\n        ").concat(u?"":"cursor-grab active:cursor-grabbing","\n        ").concat(m?"opacity-40 scale-95 border-dashed":"","\n        ").concat(h?"animate-success-pulse ring-2 ring-green-500":"","\n        animate-slide-up-fade\n      "),style:{animationDelay:"".concat(50*r,"ms")},children:[(0,s.jsx)("div",{className:"flex justify-between items-start mb-3",children:(0,s.jsx)("div",{className:"\n          w-12 h-12 rounded-xl flex items-center justify-center text-2xl shadow-lg \n          transition-transform group-hover:scale-110\n          ".concat(p?"bg-gradient-to-br from-blue-500/10 to-indigo-500/10":"bg-gradient-to-br from-emerald-500/10 to-teal-500/10","\n        "),children:t.emoji||(p?"\uD83D\uDCC1":"\uD83D\uDCC4")})}),(0,s.jsx)("h3",{className:"text-white font-bold text-base mb-1 truncate pr-2",children:t.name}),(0,s.jsxs)("div",{className:"flex items-center gap-2 text-xs text-gray-400 mb-2",children:[(0,s.jsx)("span",{children:t.date||"Hoje"}),p&&t.children&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("span",{className:"w-1 h-1 rounded-full bg-gray-600"}),(0,s.jsxs)("span",{children:[t.children.length," itens"]})]}),!p&&t.category&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("span",{className:"w-1 h-1 rounded-full bg-gray-600"}),(0,s.jsx)("span",{className:"px-1.5 py-0.5 rounded bg-white/5 border border-white/5",children:t.category})]})]}),!p&&t.tags&&t.tags.length>0&&(0,s.jsxs)("div",{className:"flex flex-wrap gap-1.5 mb-3",children:[t.tags.slice(0,2).map(e=>(0,s.jsx)("span",{className:"text-[10px] uppercase font-bold px-2 py-0.5 rounded bg-white/5 text-gray-400 border border-white/5",children:e},e)),t.tags.length>2&&(0,s.jsxs)("span",{className:"text-[10px] text-gray-400",children:["+",t.tags.length-2]})]}),(0,s.jsxs)("div",{className:"flex gap-2 pt-4 border-t border-white/5 mt-auto",children:[(0,s.jsx)(w,{content:"Editar ".concat(t.type),position:"top",children:(0,s.jsxs)("button",{onClick:e=>{e.stopPropagation(),i(t)},className:"flex-1 flex items-center justify-center gap-1.5 px-4 py-2 bg-[#2979ff] hover:bg-[#2264d1] text-white rounded-lg transition-all text-xs font-bold shadow-lg shadow-blue-900/30 hover:shadow-blue-900/50 active:scale-95",children:[(0,s.jsx)($.Z,{size:12})," EDITAR"]})}),(0,s.jsx)(w,{content:"Compartilhar",position:"top",children:(0,s.jsx)("button",{onClick:e=>{e.stopPropagation(),l(t)},className:"p-2 bg-transparent hover:bg-white/5 text-gray-400 hover:text-white rounded-lg transition-all border border-white/10 hover:border-white/20 active:scale-95 group",children:(0,s.jsx)(U.Z,{size:14,className:"group-hover:rotate-12 transition-transform"})})})]})]})},ed=()=>{let e=M(e=>e.data),t=M(e=>e.sequentialPath),r=M(e=>e.slideDirection),n=M(e=>e.isLocked),i=M(e=>e.dragState),l=M(e=>e.justDroppedId),{navigateToFolder:o,navigateToIndex:d,goBack:c,goToRoot:x,setDragState:u,openEditModal:m,setPromptViewerOpen:h,setSelectedPrompt:p,showToast:g,moveItem:f}=M(e=>e.actions),{nodes:b,title:j}=(()=>{let r=e,s="Pastas Principais";for(let e of t){let t=r.find(t=>t.id===e);if(!t||"folder"!==t.type||!t.children)return{nodes:[],title:"Erro"};r=t.children,s=t.name}return{nodes:r,title:s}})(),v=(()=>{let r=[],s=e;for(let e of t){let t=s.find(t=>t.id===e);t&&"folder"===t.type&&(r.push({id:t.id,name:t.name,emoji:t.emoji}),s=t.children||[])}return r})(),w=(e,t)=>{if(n){e.preventDefault(),g("Desbloqueie para arrastar","warning");return}e.dataTransfer.setData("text/plain",t.id),e.dataTransfer.effectAllowed="move",u({draggedItemId:t.id,draggedItemType:t.type})},y=e=>{n||(e.preventDefault(),e.currentTarget.classList.add("ring-2","ring-[#2979ff]","scale-[1.02]"))},N=e=>{e.currentTarget.classList.remove("ring-2","ring-[#2979ff]","scale-[1.02]")},D=(e,t)=>{if(n)return;e.preventDefault(),e.currentTarget.classList.remove("ring-2","ring-[#2979ff]","scale-[1.02]");let r=i.draggedItemId;if(!r||r===t.id){u({draggedItemId:null,draggedItemType:null});return}"folder"===t.type?f(r,t.id):g("Solte sobre uma pasta","info"),u({draggedItemId:null,draggedItemType:null})},C=e=>{o(e)},k=e=>{p(e),h(!0)},z=e=>{m(e,!1)},S=e=>{g('Compartilhando "'.concat(e.name,'"...'),"success")};return(0,s.jsxs)("div",{className:"p-8 max-w-5xl mx-auto animate-in fade-in slide-in-from-bottom-4 duration-500",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4 mb-8",children:[t.length>0&&(0,s.jsx)("button",{onClick:c,className:"p-2 rounded-full bg-white/5 hover:bg-white/10 text-white transition-all hover:-translate-x-1",children:(0,s.jsx)(ee.Z,{size:20})}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("h2",{className:"text-3xl font-bold text-white tracking-tight flex items-center gap-3",children:[0===t.length?(0,s.jsx)(et.Z,{size:28,className:"text-[#2979ff]"}):(0,s.jsx)(er.Z,{size:28,className:"text-[#2979ff]"}),j]}),(0,s.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-400 mt-2",children:[(0,s.jsxs)("button",{onClick:x,className:"hover:text-white transition-colors flex items-center gap-1 ".concat(0===t.length?"text-white font-bold":""),children:[(0,s.jsx)(et.Z,{size:14})," In\xedcio"]}),v.map((e,t)=>(0,s.jsxs)(a.Fragment,{children:[(0,s.jsx)(es.Z,{size:12,className:"text-gray-500"}),(0,s.jsxs)("button",{onClick:()=>d(t),className:"hover:text-white transition-colors flex items-center gap-1 ".concat(t===v.length-1?"text-white font-bold":""),children:[e.emoji," ",e.name]})]},e.id))]}),(0,s.jsxs)("p",{className:"text-gray-400 text-sm mt-1 flex items-center gap-2",children:[(0,s.jsx)("span",{className:"w-2 h-2 rounded-full bg-green-500"}),b.length," itens dispon\xedveis"]})]})]}),(0,s.jsxs)(en,{direction:r,className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:[b.map((e,t)=>(0,s.jsx)(eo,{item:e,index:t,onNavigate:C,onSelectPrompt:k,onEdit:z,onShare:S,onDragStart:w,onDragOver:y,onDragLeave:N,onDrop:D,isLocked:n,isDragging:i.draggedItemId===e.id,isJustDropped:l===e.id},e.id)),0===b.length&&(0,s.jsxs)("div",{className:"col-span-full flex flex-col items-center justify-center py-20 text-gray-400 border-2 border-dashed border-white/5 rounded-xl bg-white/[0.02] animate-in fade-in zoom-in-95 duration-300",children:[(0,s.jsx)("div",{className:"w-16 h-16 rounded-full bg-white/5 flex items-center justify-center mb-4",children:(0,s.jsx)(er.Z,{size:32,className:"opacity-40"})}),(0,s.jsx)("p",{className:"text-sm font-bold text-gray-300",children:"Esta pasta est\xe1 vazia"}),(0,s.jsx)("p",{className:"text-xs mt-1 text-gray-500",children:"Comece criando uma nova pasta ou prompt."})]}),(0,s.jsxs)("button",{onClick:()=>{if(n){g("Desbloqueie para criar","warning");return}g("Criar nova pasta...","info")},className:"flex flex-col items-center justify-center gap-3 bg-[#1e2330]/30 border border-dashed border-white/10 hover:border-[#2979ff]/50 hover:bg-[#2979ff]/5 rounded-xl p-5 cursor-pointer transition-all group animate-slide-up-fade min-h-[160px]",style:{animationDelay:"".concat(50*b.length,"ms")},children:[(0,s.jsx)("div",{className:"w-12 h-12 rounded-full bg-white/5 flex items-center justify-center text-gray-400 group-hover:text-[#2979ff] group-hover:scale-110 transition-all",children:(0,s.jsx)(H.Z,{size:24})}),(0,s.jsx)("span",{className:"text-sm font-medium text-gray-400 group-hover:text-[#2979ff]",children:"Nova Pasta"})]})]})]})};var ec=r(8496),ex=r(7938),eu=r(3907),em=r(5733),eh=r(6884),ep=r(2095);let eg=e=>{var t;let{x:r,y:n,item:i,onClose:l,onEdit:o,onDelete:d,onMove:c,onCreateFolder:x,onCreatePrompt:u,onCopy:m,onShare:h}=e,p=(0,a.useRef)(null),g=M(e=>e.isLocked),{showToast:f,openEditModal:b,setPromptViewerOpen:j,setSelectedPrompt:v}=M(e=>e.actions),w="folder"===i.type,[y,N]=(0,a.useState)({x:r,y:n});(0,a.useEffect)(()=>{if(p.current){let e=p.current.getBoundingClientRect(),t=window.innerWidth,s=window.innerHeight,a=r,i=n;r+e.width>t-20&&(a=t-e.width-20),n+e.height>s-20&&(i=s-e.height-20),N({x:a,y:i})}},[r,n]),(0,a.useEffect)(()=>{let e=e=>{p.current&&!p.current.contains(e.target)&&l()},t=e=>{"Escape"===e.key&&l()};return document.addEventListener("mousedown",e),document.addEventListener("keydown",t),()=>{document.removeEventListener("mousedown",e),document.removeEventListener("keydown",t)}},[l]);let D=[];return w||D.push({id:"view",label:"Visualizar",icon:(0,s.jsx)(em.Z,{size:14}),onClick:()=>{v(i),j(!0),l()}}),D.push({id:"edit",label:"Editar",icon:(0,s.jsx)($.Z,{size:14}),onClick:()=>{o?o(i):b(i,!w),l()}}),D.push({id:"copy",label:w?"Duplicar":"Copiar Conte\xfado",icon:(0,s.jsx)(eh.Z,{size:14}),onClick:()=>{m?m(i):w?f("Pasta duplicada!","success"):(navigator.clipboard.writeText(i.content||""),f("Conte\xfado copiado!","success")),l()}}),D.push({id:"div1",label:"",icon:null,onClick:()=>{},divider:!0}),w&&(D.push({id:"create-folder",label:"Nova Subpasta",icon:(0,s.jsx)(O.Z,{size:14}),onClick:()=>{g?f("Desbloqueie para criar","warning"):x?x(i.id):f("Criar subpasta...","info"),l()},disabled:g}),D.push({id:"create-prompt",label:"Novo Prompt",icon:(0,s.jsx)(R.Z,{size:14}),onClick:()=>{g?f("Desbloqueie para criar","warning"):u?u(i.id):f("Criar prompt...","info"),l()},disabled:g})),D.push({id:"move",label:"Mover para...",icon:(0,s.jsx)(ep.Z,{size:14}),onClick:()=>{g?f("Desbloqueie para mover","warning"):c?c(i):f("Selecionar destino...","info"),l()},disabled:g}),D.push({id:"div2",label:"",icon:null,onClick:()=>{},divider:!0}),D.push({id:"share",label:"Compartilhar",icon:(0,s.jsx)(U.Z,{size:14}),onClick:()=>{h?h(i):f('Compartilhando "'.concat(i.name,'"...'),"info"),l()}}),D.push({id:"copy-link",label:"Copiar Link",icon:(0,s.jsx)(V.Z,{size:14}),onClick:()=>{let e="".concat(window.location.origin,"/share/").concat(i.id);navigator.clipboard.writeText(e),f("Link copiado!","success"),l()}}),D.push({id:"div3",label:"",icon:null,onClick:()=>{},divider:!0}),D.push({id:"delete",label:"Excluir",icon:(0,s.jsx)(_.Z,{size:14}),onClick:()=>{g?f("Desbloqueie para excluir","warning"):d?d(i):f("Confirmar exclus\xe3o?","warning"),l()},disabled:g,danger:!0}),(0,s.jsxs)("div",{ref:p,style:{top:y.y,left:y.x},className:"fixed z-[300] bg-[#1e2330] border border-white/10 rounded-xl shadow-2xl py-1 min-w-[180px] animate-context-menu",children:[(0,s.jsx)("div",{className:"px-3 py-2 border-b border-white/5 mb-1",children:(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("span",{className:"text-lg",children:i.emoji||(w?"\uD83D\uDCC1":"\uD83D\uDCC4")}),(0,s.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,s.jsx)("p",{className:"text-xs font-bold text-white truncate",children:i.name}),(0,s.jsx)("p",{className:"text-[10px] text-gray-500",children:w?"".concat((null===(t=i.children)||void 0===t?void 0:t.length)||0," itens"):i.category||"Prompt"})]})]})}),D.map(e=>e.divider?(0,s.jsx)("div",{className:"h-px bg-white/5 my-1"},e.id):(0,s.jsxs)("button",{onClick:e.onClick,disabled:e.disabled,className:"\n              w-full px-3 py-2 text-left text-xs flex items-center gap-2.5\n              transition-colors disabled:opacity-40 disabled:cursor-not-allowed\n              ".concat(e.danger?"text-red-400 hover:bg-red-500/10 hover:text-red-300":"text-gray-300 hover:bg-white/5 hover:text-white","\n            "),children:[e.icon,(0,s.jsx)("span",{children:e.label})]},e.id))]})},ef=()=>{let[e,t]=(0,a.useState)(null);return{contextMenu:e,openContextMenu:(0,a.useCallback)((e,r)=>{e.preventDefault(),e.stopPropagation(),t({x:e.clientX,y:e.clientY,item:r})},[]),closeContextMenu:(0,a.useCallback)(()=>{t(null)},[])}},eb=e=>{var t;let{item:r,isSelected:a,onClick:n,onEdit:i,onDelete:l,onContextMenu:o,onDragStart:d,onDragOver:c,onDragLeave:x,onDrop:u,isLocked:m,isDragging:h,isJustDropped:p}=e,g="folder"===r.type;return(0,s.jsxs)("div",{draggable:!m,onDragStart:d,onDragOver:c,onDragLeave:x,onDrop:u,onClick:n,onContextMenu:o,"data-item-id":r.id,className:"\n        group flex items-center justify-between p-3 rounded-lg cursor-pointer \n        transition-all border\n        ".concat(a?"bg-[#2979ff]/10 border-[#2979ff]/30":"bg-[#1e2330] border-white/5 hover:border-white/20","\n        ").concat(h?"opacity-40 scale-95":"","\n        ").concat(p?"ring-2 ring-green-500 animate-success-pulse":"","\n      "),children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 min-w-0",children:[(0,s.jsx)("span",{className:"text-lg",children:r.emoji||(g?"\uD83D\uDCC1":"\uD83D\uDCC4")}),(0,s.jsxs)("div",{className:"min-w-0",children:[(0,s.jsx)("p",{className:"text-sm font-medium truncate ".concat(a?"text-white":"text-gray-300"),children:r.name}),(0,s.jsx)("p",{className:"text-[10px] text-gray-400",children:g?"".concat((null===(t=r.children)||void 0===t?void 0:t.length)||0," itens"):r.category||"Prompt"})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-1",children:[(0,s.jsx)("button",{onClick:i,className:"p-1 text-gray-400 hover:text-white hover:bg-white/10 rounded transition-colors",children:(0,s.jsx)($.Z,{size:12})}),!m&&l&&(0,s.jsx)("button",{onClick:l,className:"p-1 text-gray-400 hover:text-red-400 hover:bg-red-500/10 rounded transition-colors",children:(0,s.jsx)(_.Z,{size:12})}),g&&(0,s.jsx)(es.Z,{size:14,className:"text-gray-400 transition-colors ml-1 ".concat(a?"text-[#2979ff]":"")})]})]})},ej=e=>{let{title:t,icon:r,items:a,selectedId:n,onSelect:i,onEdit:l,onDelete:o,onContextMenu:d,onNewItem:c,newItemLabel:x,emptyTitle:u,emptyDescription:m,columnType:h,onDragOver:p,onDrop:g,isLocked:f,draggedItemId:b,justDroppedId:j,onDragStart:v,onItemDragOver:y,onItemDragLeave:N,onItemDrop:D}=e;return(0,s.jsxs)("div",{className:"\n        min-w-[280px] max-w-[280px] flex flex-col shrink-0\n        ".concat("prompt"===h?"min-w-[320px] max-w-[320px]":""," bg-[#0f111a]\n      "),onDragOver:p,onDrop:g,children:[(0,s.jsxs)("div",{className:"p-3 border-b border-white/5 flex justify-between items-center bg-[#13161c]",children:[(0,s.jsxs)("span",{className:"text-xs font-bold text-gray-400 uppercase tracking-wider flex items-center gap-2",children:[r,t]}),c&&(0,s.jsx)(w,{content:x||"Novo",position:"bottom",children:(0,s.jsx)("button",{onClick:c,disabled:f,className:"p-1 hover:bg-white/10 rounded text-gray-400 hover:text-white transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:(0,s.jsx)(H.Z,{size:14})})})]}),(0,s.jsx)("div",{className:"flex-1 overflow-y-auto p-2 space-y-1 custom-scrollbar",children:0===a.length?(0,s.jsxs)("div",{className:"h-full flex flex-col items-center justify-center text-gray-500/50 p-4 text-center",children:[(0,s.jsx)("div",{className:"w-12 h-12 rounded-full bg-white/5 flex items-center justify-center mb-3",children:(0,s.jsx)(er.Z,{size:20,className:"opacity-50"})}),(0,s.jsx)("p",{className:"text-xs font-medium text-gray-400",children:u}),(0,s.jsx)("p",{className:"text-[10px] mt-1 opacity-60 max-w-[150px]",children:m})]}):a.map(e=>(0,s.jsx)(eb,{item:e,isSelected:n===e.id,onClick:()=>i(e),onEdit:t=>{t.stopPropagation(),l(e)},onDelete:t=>{t.stopPropagation(),o(e)},onContextMenu:t=>d(t,e),onDragStart:t=>v(t,e),onDragOver:y,onDragLeave:N,onDrop:t=>D(t,e),isLocked:f,isDragging:b===e.id,isJustDropped:j===e.id},e.id))})]})};var ev=r(3787),ew=r(3231);let ey=e=>{var t;let{prompt:r,onEdit:n,onOpenFull:i,isLocked:l}=e,[o,d]=(0,a.useState)(!1),{showToast:c}=M(e=>e.actions);return r?(0,s.jsxs)("div",{className:"flex-1 min-w-[350px] flex flex-col bg-[#13161c] border-l border-white/5",children:[(0,s.jsxs)("div",{className:"p-4 border-b border-white/5 bg-[#181b24]",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[(0,s.jsx)("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-br from-[#2979ff]/20 to-purple-500/20 flex items-center justify-center text-2xl shadow-lg",children:r.emoji||"\uD83D\uDCC4"}),(0,s.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,s.jsx)("h3",{className:"text-base font-bold text-white truncate",children:r.name}),(0,s.jsxs)("div",{className:"flex items-center gap-2 text-xs text-gray-400",children:[(0,s.jsx)("span",{className:"px-1.5 py-0.5 rounded bg-white/5 border border-white/5",children:r.category||"Geral"}),(0,s.jsx)("span",{children:"•"}),(0,s.jsx)("span",{children:r.date})]})]})]}),r.tags&&r.tags.length>0&&(0,s.jsx)("div",{className:"flex flex-wrap gap-1.5 mb-3",children:r.tags.map(e=>(0,s.jsx)("span",{className:"text-[10px] uppercase font-bold px-2 py-0.5 rounded bg-[#2979ff]/10 text-[#2979ff] border border-[#2979ff]/20",children:e},e))}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsxs)("button",{onClick:i,className:"flex-1 flex items-center justify-center gap-2 px-4 py-2 bg-[#2979ff] hover:bg-[#2264d1] text-white text-xs font-bold rounded-lg transition-all shadow-lg shadow-blue-900/20",children:[(0,s.jsx)(ev.Z,{size:14}),"Abrir Completo"]}),(0,s.jsx)(w,{content:"Editar",position:"bottom",children:(0,s.jsx)("button",{onClick:n,disabled:l,className:"p-2 text-gray-400 hover:text-white hover:bg-white/10 rounded-lg transition-colors disabled:opacity-50",children:(0,s.jsx)($.Z,{size:16})})}),(0,s.jsx)(w,{content:o?"Copiado!":"Copiar",position:"bottom",children:(0,s.jsx)("button",{onClick:()=>{r&&(navigator.clipboard.writeText(r.content||""),d(!0),c("Copiado!","success"),setTimeout(()=>d(!1),2e3))},className:"p-2 rounded-lg transition-colors ".concat(o?"text-green-400 bg-green-500/10":"text-gray-400 hover:text-white hover:bg-white/10"),children:o?(0,s.jsx)(ew.Z,{size:16}):(0,s.jsx)(eh.Z,{size:16})})}),(0,s.jsx)(w,{content:"Compartilhar",position:"bottom",children:(0,s.jsx)("button",{onClick:()=>c("Compartilhando...","info"),className:"p-2 text-gray-400 hover:text-white hover:bg-white/10 rounded-lg transition-colors",children:(0,s.jsx)(U.Z,{size:16})})})]})]}),(0,s.jsx)("div",{className:"flex-1 overflow-y-auto custom-scrollbar p-4",children:(0,s.jsx)("div",{className:"bg-[#0f111a] border border-white/5 rounded-lg p-4 shadow-inner min-h-[200px]",children:(0,s.jsx)("pre",{className:"text-sm text-gray-300 whitespace-pre-wrap font-mono leading-relaxed",children:r.content||"Sem conte\xfado"})})}),(0,s.jsx)("div",{className:"p-4 border-t border-white/5 bg-[#0f111a]/50",children:(0,s.jsxs)("div",{className:"flex items-center justify-between text-[10px] text-gray-400",children:[(0,s.jsxs)("span",{children:[(null===(t=r.content)||void 0===t?void 0:t.length)||0," caracteres"]}),(0,s.jsxs)("span",{children:["Atualizado: ",r.date]})]})})]}):(0,s.jsxs)("div",{className:"flex-1 min-w-[350px] flex flex-col items-center justify-center bg-[#13161c] border-l border-white/5 text-gray-500/50 p-6",children:[(0,s.jsx)("div",{className:"w-16 h-16 rounded-xl bg-white/5 flex items-center justify-center mb-4",children:(0,s.jsx)(em.Z,{size:28,className:"opacity-40"})}),(0,s.jsx)("p",{className:"text-sm font-medium text-gray-400",children:"Preview"}),(0,s.jsx)("p",{className:"text-xs mt-1 text-gray-500 text-center max-w-[200px]",children:"Selecione um prompt para visualizar"})]})},eN=()=>{let[e,t]=(0,a.useState)(null),r=M(e=>e.data),n=M(e=>e.selectedFolder),i=M(e=>e.selectedSubfolder),l=M(e=>e.isLocked),o=M(e=>e.dragState),d=M(e=>e.justDroppedId),{setSelectedFolder:c,setSelectedSubfolder:x,setSelectedPrompt:u,setPromptViewerOpen:m,setDragState:h,openEditModal:p,showToast:g,moveItem:f,getValidMoveTargets:b,setMoveSelector:j,findItem:v,isDescendant:w}=M(e=>e.actions),{contextMenu:y,openContextMenu:N,closeContextMenu:D}=ef(),C=r.filter(e=>"folder"===e.type),k=n?(n.children||[]).filter(e=>"folder"===e.type):[],z=i?(i.children||[]).filter(e=>"prompt"===e.type):n?(n.children||[]).filter(e=>"prompt"===e.type):[],S=e=>{p(e,"prompt"===e.type)},Z=e=>{if(l){g("Desbloqueie para excluir","warning");return}g('Excluir "'.concat(e.name,'"?'),"warning")},E=(e,t)=>{if(l){e.preventDefault(),g("Desbloqueie para arrastar","warning");return}e.dataTransfer.setData("text/plain",t.id),e.dataTransfer.effectAllowed="move",h({draggedItemId:t.id,draggedItemType:t.type})},I=e=>{l||(e.preventDefault(),e.stopPropagation(),e.currentTarget.classList.add("ring-2","ring-[#2979ff]","scale-[1.02]"))},P=e=>{e.currentTarget.classList.remove("ring-2","ring-[#2979ff]","scale-[1.02]")},L=(e,t)=>{if(l)return;e.preventDefault(),e.stopPropagation(),e.currentTarget.classList.remove("ring-2","ring-[#2979ff]","scale-[1.02]");let r=o.draggedItemId;if(!r||r===t.id){h({draggedItemId:null,draggedItemType:null});return}let s=v(r);if((null==s?void 0:s.type)==="folder"&&"folder"===t.type&&w(r,t.id)){g("N\xe3o \xe9 poss\xedvel mover para dentro de si mesmo","error"),h({draggedItemId:null,draggedItemType:null});return}"folder"===t.type?f(r,t.id):g("Solte sobre uma pasta","info"),h({draggedItemId:null,draggedItemType:null})},T=e=>{l||(e.preventDefault(),e.stopPropagation())},A=(e,t)=>{if(l)return;e.preventDefault(),e.stopPropagation();let r=o.draggedItemId;if(!r)return;let s=v(r);if(s){if(!e.target.closest("[data-item-id]")){let e=b(r);j({open:!0,draggedId:r,draggedType:s.type,availableTargets:e})}h({draggedItemId:null,draggedItemType:null})}};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"flex h-full divide-x divide-white/5 overflow-x-auto",children:[(0,s.jsx)(ej,{title:"Pastas",icon:(0,s.jsx)(ec.Z,{size:14}),items:C,selectedId:(null==n?void 0:n.id)||null,onSelect:e=>{"folder"===e.type&&(c(e),t(null))},onEdit:S,onDelete:Z,onContextMenu:N,onNewItem:()=>{if(l){g("Desbloqueie para criar","warning");return}g("Criar nova pasta...","info")},newItemLabel:"Nova Pasta",emptyTitle:"Sem pastas",emptyDescription:"Crie sua primeira pasta",columnType:"root",onDragOver:T,onDrop:e=>A(e,"root"),isLocked:l,draggedItemId:o.draggedItemId,justDroppedId:d,onDragStart:E,onItemDragOver:I,onItemDragLeave:P,onItemDrop:L}),(0,s.jsx)(ej,{title:"Subpastas",icon:(0,s.jsx)(ex.Z,{size:14}),items:k,selectedId:(null==i?void 0:i.id)||null,onSelect:e=>{"folder"===e.type&&(x(e),t(null))},onEdit:S,onDelete:Z,onContextMenu:N,onNewItem:()=>{if(l){g("Desbloqueie para criar","warning");return}if(!n){g("Selecione uma pasta primeiro","warning");return}g("Criar subpasta...","info")},newItemLabel:"Nova Subpasta",emptyTitle:n?"Vazio":"Nenhuma pasta selecionada",emptyDescription:n?"Sem subpastas aqui":"Selecione uma pasta raiz",columnType:"subfolder",onDragOver:T,onDrop:e=>A(e,"subfolder"),isLocked:l,draggedItemId:o.draggedItemId,justDroppedId:d,onDragStart:E,onItemDragOver:I,onItemDragLeave:P,onItemDrop:L}),(0,s.jsx)(ej,{title:"Prompts",icon:(0,s.jsx)(eu.Z,{size:14}),items:z,selectedId:(null==e?void 0:e.id)||null,onSelect:e=>{"prompt"===e.type&&t(e)},onEdit:S,onDelete:Z,onContextMenu:N,onNewItem:()=>{if(l){g("Desbloqueie para criar","warning");return}if(!n&&!i){g("Selecione uma pasta primeiro","warning");return}g("Criar prompt...","info")},newItemLabel:"Novo Prompt",emptyTitle:n?"Nenhum prompt":"Nenhuma pasta selecionada",emptyDescription:n?"Esta pasta est\xe1 vazia":"Navegue pelas pastas",columnType:"prompt",onDragOver:T,onDrop:e=>A(e,"prompt"),isLocked:l,draggedItemId:o.draggedItemId,justDroppedId:d,onDragStart:E,onItemDragOver:I,onItemDragLeave:P,onItemDrop:L}),(0,s.jsx)(ey,{prompt:e,onEdit:()=>e&&S(e),onOpenFull:()=>{e&&(u(e),m(!0))},isLocked:l})]}),y&&(0,s.jsx)(eg,{x:y.x,y:y.y,item:y.item,onClose:D,onEdit:S,onDelete:Z})]})};var eD=r(7063),eC=r(1106),ek=r(2023);let ez=e=>{let{searchQuery:t,onSearchChange:r,totalFolders:a,totalPrompts:n}=e;return(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(m.Z,{size:14,className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500"}),(0,s.jsx)("input",{type:"text",value:t,onChange:e=>r(e.target.value),placeholder:"Buscar na hierarquia...",className:"w-full h-10 bg-[#0f111a] border border-white/10 rounded-lg pl-10 pr-4 text-sm text-gray-300 focus:outline-none focus:border-[#2979ff] transition-all placeholder-gray-600"})]}),(0,s.jsxs)("div",{className:"flex items-center gap-4 text-xs text-gray-400",children:[(0,s.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,s.jsx)(ec.Z,{size:12}),(0,s.jsxs)("span",{children:[a," pastas"]})]}),(0,s.jsx)("div",{className:"w-1 h-1 rounded-full bg-gray-600"}),(0,s.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,s.jsx)(ek.Z,{size:12}),(0,s.jsxs)("span",{children:[n," prompts"]})]}),t&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"w-1 h-1 rounded-full bg-gray-600"}),(0,s.jsxs)("span",{className:"text-[#2979ff]",children:['Filtrando por "',t,'"']})]})]})]})},eS=e=>{var t,r,n,i;let{node:l,level:o=0,onSelect:d,onEdit:x,onDelete:u,onContextMenu:m,isLocked:h,selectedPromptId:p,searchQuery:g,expandedIds:f,onToggleExpand:b}=e,j="folder"===l.type,v=j&&(null===(t=l.children)||void 0===t?void 0:t.length)>0,w=f.has(l.id),y="prompt"===l.type&&p===l.id,N=!g||l.name.toLowerCase().includes(g.toLowerCase())||"prompt"===l.type&&((null===(r=l.content)||void 0===r?void 0:r.toLowerCase().includes(g.toLowerCase()))||(null===(n=l.tags)||void 0===n?void 0:n.some(e=>e.toLowerCase().includes(g.toLowerCase())))),D=(0,a.useCallback)(()=>{if(!j||!g)return!1;let e=t=>{for(let r of t)if(r.name.toLowerCase().includes(g.toLowerCase())||"folder"===r.type&&r.children&&e(r.children))return!0;return!1};return e(l.children||[])},[j,l,g]);if(g&&!N&&!D())return null;let C=e=>{e.stopPropagation(),j?b(l.id):d(l)},k=j&&(null===(i=l.children)||void 0===i?void 0:i.length)||0;return(0,s.jsxs)("div",{className:"flex flex-col",children:[(0,s.jsxs)("div",{onClick:C,onKeyDown:e=>{("Enter"===e.key||" "===e.key)&&(e.preventDefault(),C(e)),"ArrowRight"===e.key&&j&&!w&&b(l.id),"ArrowLeft"===e.key&&j&&w&&b(l.id)},onContextMenu:e=>m(e,l),tabIndex:0,role:"button","aria-label":"".concat(j?"Pasta":"Prompt",": ").concat(l.name),"aria-expanded":j?w:void 0,style:{paddingLeft:"".concat(24*o+8,"px")},className:"\n          group flex items-center justify-between transition-all duration-150 \n          cursor-pointer text-gray-300 border-l-[3px] my-0.5 rounded-r-md py-2\n          ".concat(y?"bg-gradient-to-r from-[#2979ff]/10 to-transparent border-l-[#2979ff] text-white":"border-l-transparent hover:bg-gradient-to-r hover:from-white/5 hover:to-transparent hover:border-l-white/20","\n          ").concat(N&&g?"bg-[#2979ff]/5":"","\n        "),children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 min-w-0 flex-1",children:[v?(0,s.jsx)("button",{onClick:e=>{e.stopPropagation(),b(l.id)},className:"p-0.5 hover:bg-white/10 rounded transition-colors",children:(0,s.jsx)(es.Z,{size:14,className:"text-gray-400 transition-transform duration-200 ease-out ".concat(w?"rotate-90":"")})}):(0,s.jsx)("div",{className:"w-4"}),l.emoji?(0,s.jsx)("span",{className:"text-base leading-none w-5 text-center shrink-0",children:l.emoji}):j?l.isSystem?(0,s.jsx)(c.Z,{size:16,className:"text-gray-300 shrink-0"}):w?(0,s.jsx)(er.Z,{size:16,className:"text-[#2979ff] shrink-0"}):(0,s.jsx)(ec.Z,{size:16,className:"text-gray-400 shrink-0"}):(0,s.jsx)(ek.Z,{size:14,className:"text-gray-400 shrink-0"}),(0,s.jsxs)("div",{className:"flex items-center gap-2 min-w-0 flex-1",children:[(0,s.jsx)("span",{className:"\n                truncate\n                ".concat(j?"font-medium text-sm":"text-[13px] font-normal text-gray-300 group-hover:text-gray-200","\n              "),children:l.name}),j&&k>0&&(0,s.jsx)("span",{className:"text-[10px] text-gray-500 bg-white/5 px-1.5 py-0.5 rounded",children:k}),j&&l.isSystem&&(0,s.jsx)("span",{className:"text-[9px] uppercase font-bold px-1.5 py-0.5 rounded bg-purple-500/10 text-purple-400 border border-purple-500/20",children:"SYS"}),!j&&l.tags&&l.tags.length>0&&(0,s.jsxs)("div",{className:"flex items-center gap-1",children:[l.tags.slice(0,2).map(e=>(0,s.jsx)("span",{className:"text-[9px] uppercase tracking-[0.5px] text-gray-400 border border-white/10 px-1 rounded",children:e},e)),l.tags.length>2&&(0,s.jsxs)("span",{className:"text-[9px] text-gray-500",children:["+",l.tags.length-2]})]})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-1 mr-2",children:[(0,s.jsx)("button",{onClick:e=>{e.stopPropagation(),x(l)},className:"p-1 text-gray-500 hover:text-white hover:bg-white/10 rounded transition-colors",title:"Editar",children:(0,s.jsx)($.Z,{size:12})}),!h&&(0,s.jsx)("button",{onClick:e=>{e.stopPropagation(),u(l)},className:"p-1 text-gray-500 hover:text-red-400 hover:bg-red-500/10 rounded transition-colors",title:"Excluir",children:(0,s.jsx)(_.Z,{size:12})})]})]}),v&&(0,s.jsx)(ea,{isExpanded:w,children:l.children.map(e=>(0,s.jsx)(eS,{node:e,level:o+1,onSelect:d,onEdit:x,onDelete:u,onContextMenu:m,isLocked:h,selectedPromptId:p,searchQuery:g,expandedIds:f,onToggleExpand:b},e.id))})]})},eZ=()=>{let[e,t]=(0,a.useState)(!1),[r,n]=(0,a.useState)(""),[i,o]=(0,a.useState)(new Set(["f1","f1-1"])),d=M(e=>e.data),c=M(e=>e.selectedPrompt),x=M(e=>e.isLocked),{setSelectedPrompt:u,setPromptViewerOpen:m,openEditModal:h,showToast:p}=M(e=>e.actions),{contextMenu:g,openContextMenu:f,closeContextMenu:b}=ef(),j=(0,a.useCallback)(e=>{o(t=>{let r=new Set(t);return r.has(e)?r.delete(e):r.add(e),r})},[]),v=e=>{u(e),m(!0)},y=e=>{h(e,"prompt"===e.type)},N=e=>{if(x){p("Desbloqueie para excluir","warning");return}p('Excluir "'.concat(e.name,'"?'),"warning")},D=e=>{let t=0,r=0;for(let s of e)if("folder"===s.type){if(t++,s.children){let e=D(s.children);t+=e.folders,r+=e.prompts}}else r++;return{folders:t,prompts:r}},{folders:C,prompts:k}=D(d);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"\n          flex flex-col overflow-hidden transition-all duration-300\n          ".concat(e?"fixed inset-0 z-50 bg-[#0f111a]":"h-full","\n        "),children:[(0,s.jsx)("div",{className:"p-6 pb-4 shrink-0",children:(0,s.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,s.jsxs)("h2",{className:"text-2xl font-bold text-white flex items-center gap-3",children:[(0,s.jsx)(l.Z,{size:24,className:"text-[#2979ff]"}),"Estrutura Hier\xe1rquica"]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(w,{content:"Expandir Todos",position:"bottom",children:(0,s.jsx)("button",{onClick:()=>{let e=new Set,t=r=>{for(let s of r)"folder"===s.type&&(e.add(s.id),s.children&&t(s.children))};t(d),o(e)},className:"p-2 bg-[#1e2330] hover:bg-white/10 rounded-lg text-gray-400 hover:text-white transition-colors",children:(0,s.jsx)(H.Z,{size:16})})}),(0,s.jsx)(w,{content:"Recolher Todos",position:"bottom",children:(0,s.jsx)("button",{onClick:()=>{o(new Set)},className:"p-2 bg-[#1e2330] hover:bg-white/10 rounded-lg text-gray-400 hover:text-white transition-colors",children:(0,s.jsx)(eD.Z,{size:16})})}),(0,s.jsx)("div",{className:"w-px h-6 bg-white/10 mx-1"}),(0,s.jsx)(w,{content:e?"Sair Tela Cheia":"Tela Cheia",position:"bottom",children:(0,s.jsx)("button",{onClick:()=>t(!e),className:"p-2 bg-[#1e2330] hover:bg-white/10 rounded-lg text-gray-400 hover:text-white transition-colors",children:e?(0,s.jsx)(eD.Z,{size:16}):(0,s.jsx)(eC.Z,{size:16})})})]})]}),(0,s.jsx)(ez,{searchQuery:r,onSearchChange:n,totalFolders:C,totalPrompts:k})]})}),(0,s.jsx)("div",{className:"flex-1 overflow-y-auto custom-scrollbar px-6 pb-6",children:(0,s.jsx)("div",{className:"max-w-4xl mx-auto",children:(0,s.jsx)("div",{className:"bg-[#1e2330] rounded-xl border border-white/10 p-6 shadow-2xl min-h-[400px]",children:0===d.length?(0,s.jsxs)("div",{className:"h-full flex flex-col items-center justify-center text-gray-400 py-20",children:[(0,s.jsx)("div",{className:"w-16 h-16 rounded-full bg-white/5 flex items-center justify-center mb-4",children:(0,s.jsx)(ec.Z,{size:32,className:"opacity-40"})}),(0,s.jsx)("p",{className:"text-sm font-bold text-gray-300",children:"Nenhum conte\xfado"}),(0,s.jsx)("p",{className:"text-xs mt-1 text-gray-500",children:"Comece criando uma pasta"})]}):d.map(e=>(0,s.jsx)(eS,{node:e,onSelect:v,onEdit:y,onDelete:N,onContextMenu:f,isLocked:x,selectedPromptId:null==c?void 0:c.id,searchQuery:r,expandedIds:i,onToggleExpand:j},e.id))})})})]}),g&&(0,s.jsx)(eg,{x:g.x,y:g.y,item:g.item,onClose:b,onEdit:y,onDelete:N})]})},eE=e=>{let{item:t,index:r}=e,{showToast:a}=M(e=>e.actions);return(0,s.jsxs)("div",{className:"bg-[#1e2330] border border-white/5 hover:border-[#5b4eff]/50 rounded-xl p-5 transition-all hover:shadow-xl group animate-slide-up-fade",style:{animationDelay:"".concat(100*r,"ms")},children:[(0,s.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"\n              w-10 h-10 rounded-full ".concat(t.owner.color," \n              flex items-center justify-center text-white font-bold text-xs \n              shadow-lg ring-2 ring-[#0f111a]\n            "),children:t.owner.initials}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("p",{className:"text-xs text-gray-400",children:["De: ",(0,s.jsx)("span",{className:"text-white font-medium",children:t.owner.name})]}),(0,s.jsx)("p",{className:"text-[10px] text-gray-500",children:t.date})]})]}),(0,s.jsx)("span",{className:"text-[10px] font-bold uppercase bg-[#5b4eff]/10 text-[#5b4eff] px-2 py-1 rounded border border-[#5b4eff]/20",children:t.permission})]}),(0,s.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[(0,s.jsx)("span",{className:"text-2xl",children:t.emoji}),(0,s.jsx)("h3",{className:"text-white font-bold text-lg truncate",children:t.name})]}),"prompt"===t.type&&t.content&&(0,s.jsx)("p",{className:"text-xs text-gray-400 line-clamp-2 mb-4 bg-[#0f111a] p-2 rounded border border-white/5 font-mono",children:t.content}),"folder"===t.type&&t.itemsCount&&(0,s.jsxs)("p",{className:"text-xs text-gray-400 mb-4",children:[t.itemsCount," itens compartilhados"]}),(0,s.jsxs)("div",{className:"flex gap-2 mt-4 pt-4 border-t border-white/5",children:[(0,s.jsx)("button",{onClick:()=>a('Abrindo "'.concat(t.name,'"...'),"info"),className:"flex-1 py-2 bg-[#5b4eff] hover:bg-[#4a3ecc] text-white text-xs font-bold rounded-lg transition-colors shadow-lg shadow-indigo-900/20",children:"Abrir"}),(0,s.jsx)("button",{onClick:()=>a("Compartilhando...","info"),className:"px-3 py-2 bg-[#1e2330] hover:bg-white/5 text-gray-300 rounded-lg border border-white/10 transition-colors",children:(0,s.jsx)(U.Z,{size:14})})]})]})},eI=()=>{let e=M(e=>e.sharedData),t=e.length>0?e:[{id:"s1",name:"Design Assets Q3",type:"folder",emoji:"\uD83C\uDFA8",owner:{name:"Ana Silva",initials:"AS",color:"bg-purple-500"},permission:"view",date:"2h atr\xe1s",itemsCount:15,isShared:!0},{id:"s2",name:"Relat\xf3rio Financeiro",type:"prompt",emoji:"\uD83D\uDCCA",owner:{name:"Carlos Mendes",initials:"CM",color:"bg-emerald-500"},permission:"view",date:"Ontem",content:"An\xe1lise completa do Q3 com proje\xe7\xf5es para o pr\xf3ximo trimestre...",isShared:!0},{id:"s3",name:"Prompts de Marketing",type:"folder",emoji:"\uD83D\uDE80",owner:{name:"Maria Costa",initials:"MC",color:"bg-pink-500"},permission:"edit",date:"H\xe1 3 dias",itemsCount:8,isShared:!0}];return(0,s.jsxs)("div",{className:"p-8 max-w-6xl mx-auto animate-in fade-in duration-500",children:[(0,s.jsx)("div",{className:"flex items-center justify-between mb-8",children:(0,s.jsxs)("div",{children:[(0,s.jsxs)("h2",{className:"text-3xl font-bold text-white tracking-tight flex items-center gap-3",children:[(0,s.jsx)(h.Z,{size:28,className:"text-[#5b4eff]"}),"Compartilhados Comigo"]}),(0,s.jsx)("p",{className:"text-gray-400 text-sm mt-1",children:"Arquivos recebidos da equipe."})]})}),0===t.length?(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center py-20 text-gray-400 border-2 border-dashed border-white/5 rounded-xl bg-white/[0.02]",children:[(0,s.jsx)("div",{className:"w-16 h-16 rounded-full bg-white/5 flex items-center justify-center mb-4",children:(0,s.jsx)(h.Z,{size:32,className:"opacity-40"})}),(0,s.jsx)("p",{className:"text-sm font-bold text-gray-300",children:"Nenhum arquivo compartilhado"}),(0,s.jsx)("p",{className:"text-xs mt-1 text-gray-500",children:"Pe\xe7a aos colegas para compartilhar com voc\xea"})]}):(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:t.map((e,t)=>(0,s.jsx)(eE,{item:e,index:t},e.id))})]})};var eP=r(4095),eL=r(4697),eT=r(2421),eM=r(7524),eA=r(2468);let eq={Essenciais:["\uD83D\uDCC1","\uD83D\uDCC2","\uD83D\uDDC2️","\uD83D\uDDC3️","\uD83D\uDCC4","\uD83D\uDCDD","\uD83D\uDCD1","\uD83D\uDCCA"],"Tech & Dev":["\uD83D\uDCBB","\uD83D\uDDA5️","⌨️","\uD83D\uDCBE","\uD83E\uDD16","⚙️","\uD83D\uDD27","\uD83D\uDC1B"],Status:["\uD83D\uDE80","\uD83C\uDFAF","\uD83D\uDD25","\uD83D\uDCA1","✅","\uD83D\uDEA7","\uD83D\uDD12","\uD83D\uDEA9"],Design:["\uD83C\uDFA8","\uD83D\uDD8C️","✒️","\uD83C\uDFAD","\uD83C\uDF08","\uD83D\uDC8E","\uD83D\uDCF8","\uD83D\uDD0D"],Social:["\uD83D\uDC4B","\uD83D\uDC65","\uD83D\uDDE3️","\uD83D\uDCAC","❤️","⭐","\uD83C\uDF89","\uD83E\uDD1D"],Negócios:["\uD83D\uDCBC","\uD83D\uDCC8","\uD83D\uDCC9","\uD83D\uDCB0","\uD83C\uDFC6","\uD83D\uDCE3","\uD83C\uDFAA","\uD83D\uDEE1️"],Tempo:["⏰","\uD83D\uDCC5","\uD83D\uDDD3️","⏳","\uD83C\uDF05","\uD83C\uDF19","☀️","\uD83C\uDF1F"]},eF=e=>{let{onSelect:t,selectedEmoji:r,className:a=""}=e;return(0,s.jsx)("div",{className:"\n        bg-[#13161c] border border-white/5 rounded-lg p-3 \n        max-h-48 overflow-y-auto shadow-xl custom-scrollbar\n        ".concat(a,"\n      "),children:Object.entries(eq).map(e=>{let[a,n]=e;return(0,s.jsxs)("div",{className:"mb-3 last:mb-0",children:[(0,s.jsx)("h4",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-wider mb-2 sticky top-0 bg-[#13161c] py-1 z-10",children:a}),(0,s.jsx)("div",{className:"grid grid-cols-8 gap-1",children:n.map(e=>(0,s.jsx)("button",{type:"button",onClick:()=>t(e),className:"\n                  w-8 h-8 flex items-center justify-center rounded text-lg \n                  hover:bg-white/10 transition-colors\n                  ".concat(r===e?"bg-[#2979ff]/20 ring-1 ring-[#2979ff]":"","\n                "),children:e},e))})]},a)})})},eO=e=>{let{emoji:t,onOpenPicker:r,className:a=""}=e;return(0,s.jsxs)("button",{type:"button",onClick:r,className:"\n        w-14 h-14 bg-[#0f111a] border border-white/10 rounded-xl \n        text-2xl flex items-center justify-center \n        hover:border-[#2979ff] hover:bg-[#2979ff]/5 \n        transition-all relative group\n        ".concat(a,"\n      "),children:[t,(0,s.jsx)("div",{className:"absolute -bottom-1.5 -right-1.5 bg-[#2979ff] text-white p-1 rounded-full opacity-60 group-hover:opacity-100 transition-opacity shadow-sm",children:(0,s.jsxs)("svg",{width:"8",height:"8",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",children:[(0,s.jsx)("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),(0,s.jsx)("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})]})})]})},eR=e=>{let[t,r]=(0,a.useState)(null);return{handleMouseDown:e=>{e.target===e.currentTarget&&r({x:e.clientX,y:e.clientY})},handleMouseUp:s=>{if(t)5>Math.sqrt(Math.abs(s.clientX-t.x)**2+Math.abs(s.clientY-t.y)**2)&&e(),r(null)}}},eB=()=>{let{isOpen:e,item:t,isFullEdit:r,isImport:n}=M(e=>e.editModal),i=M(e=>e.data),{closeEditModal:l,updateItem:o,importPackage:d,showToast:c,moveItem:x}=M(e=>e.actions),[u,m]=(0,a.useState)(""),[h,p]=(0,a.useState)("\uD83D\uDCC4"),[g,f]=(0,a.useState)(""),[b,j]=(0,a.useState)(""),[v,w]=(0,a.useState)(""),[y,N]=(0,a.useState)(""),[D,C]=(0,a.useState)(!1),k=(0,a.useRef)(null),{handleMouseDown:z,handleMouseUp:S}=eR(l);if((0,a.useEffect)(()=>{if(e&&t&&(m(t.name),p(t.emoji||"\uD83D\uDCC4"),N(""),C(!1),"prompt"===t.type)){var r;f(t.content||""),j(t.category||""),w((null===(r=t.tags)||void 0===r?void 0:r.join(", "))||"")}},[e,t]),(0,a.useEffect)(()=>{if(!e)return;let t=e=>{if("Escape"===e.key&&l(),"Tab"===e.key&&k.current){let t=k.current.querySelectorAll('button, input, select, textarea, [tabindex]:not([tabindex="-1"])');if(0===t.length)return;let r=t[0],s=t[t.length-1];e.shiftKey&&document.activeElement===r?(e.preventDefault(),null==s||s.focus()):e.shiftKey||document.activeElement!==s||(e.preventDefault(),null==r||r.focus())}};return document.addEventListener("keydown",t),()=>document.removeEventListener("keydown",t)},[e,l]),!e||!t)return null;let Z="prompt"===t.type,E="folder"===t.type?"Pasta":"Prompt",I=(e=>{let r=[],s=e=>{for(let a of e)"folder"===a.type&&a.id!==t.id&&(r.push(a),a.children&&s(a.children))};return s(e),r})(i),P=()=>{if(!u.trim()){c("Nome \xe9 obrigat\xf3rio","error");return}if(n){let e=y||null;d({...t,name:u.trim(),emoji:h},e),l();return}let e={name:u.trim(),emoji:h};if(Z&&Object.assign(e,{content:g,category:b,tags:v.split(",").map(e=>e.trim()).filter(Boolean)}),o(t.id,e),y&&""!==y){let e="root"===y?null:y;x(t.id,e)}c("Atualizado com sucesso!","success"),l()},L=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(!e||0===e.length)return null;let r=0===t?5:3;return(0,s.jsxs)("ul",{className:"mt-1 space-y-1 ".concat(t>0?"ml-3 border-l border-white/10 pl-2":""),children:[e.slice(0,r).map(e=>{var r;return(0,s.jsxs)("li",{className:"flex items-center gap-2 text-[11px] text-gray-300",children:[(0,s.jsx)("span",{children:"folder"===e.type?"\uD83D\uDCC1":"\uD83D\uDCC4"}),(0,s.jsx)("span",{className:"truncate",children:e.name}),"folder"===e.type&&(null===(r=e.children)||void 0===r?void 0:r.length)>0&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("span",{className:"text-[9px] bg-white/5 px-1 rounded",children:[e.children.length," itens"]}),L(e.children,t+1)]})]},e.id)}),e.length>r&&(0,s.jsxs)("li",{className:"text-[10px] text-gray-400 italic pl-4",children:["... e mais ",e.length-r," itens"]})]})};return(0,s.jsx)(el,{onMouseDown:z,onMouseUp:S,children:(0,s.jsx)(ei,{children:(0,s.jsxs)("div",{ref:k,onClick:e=>e.stopPropagation(),className:"\n            bg-[#1e2330] rounded-xl border border-white/10 shadow-2xl w-full p-0 \n            flex flex-col max-h-[90vh]\n            ".concat((r||n)&&Z?"max-w-2xl":"max-w-md","\n            ").concat(n?"ring-2 ring-emerald-500/50":"","\n          "),children:[(0,s.jsxs)("div",{className:"flex items-center justify-between px-5 py-4 border-b border-white/5 shrink-0 bg-[#1e2330] rounded-t-xl",children:[(0,s.jsxs)("h3",{className:"text-base font-bold text-white flex items-center gap-2",children:[n&&(0,s.jsx)(eP.Z,{size:16,className:"text-emerald-400"}),n?"Receber Transfer\xeancia":"Editar ".concat(E)]}),(0,s.jsx)("button",{onClick:l,className:"text-gray-400 hover:text-white transition-colors p-1 rounded hover:bg-white/5",children:(0,s.jsx)(eL.Z,{size:16})})]}),(0,s.jsxs)("div",{className:"flex-1 overflow-y-auto custom-scrollbar p-5",children:[(0,s.jsxs)("div",{className:"grid grid-cols-[auto_1fr] gap-4 mb-4",children:[(0,s.jsxs)("div",{className:"flex flex-col gap-1.5",children:[(0,s.jsx)("label",{className:"text-[10px] uppercase font-bold text-gray-400",children:"\xcdcone"}),(0,s.jsx)(eO,{emoji:h,onOpenPicker:()=>C(!D)})]}),(0,s.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-[10px] uppercase font-bold text-gray-400 mb-1 block",children:"Nome"}),(0,s.jsx)("input",{type:"text",value:u,onChange:e=>m(e.target.value),onKeyDown:e=>{"Enter"!==e.key||r||n||P()},placeholder:"Nome da ".concat(E),className:"w-full h-9 bg-[#0f111a] border border-white/10 rounded-lg px-3 text-sm text-gray-200 focus:outline-none focus:border-[#2979ff] transition-all placeholder-gray-600",autoFocus:!0})]}),(0,s.jsxs)("details",{className:"group",open:n,children:[(0,s.jsx)("summary",{className:"cursor-pointer p-3 bg-[#0f111a]/30 hover:bg-[#0f111a]/50 rounded-lg border border-white/10 transition-all list-none",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(es.Z,{size:14,className:"text-gray-500 group-open:rotate-90 transition-transform"}),(0,s.jsx)(er.Z,{size:14,className:"text-gray-500"}),(0,s.jsx)("span",{className:"text-xs uppercase font-bold text-gray-400 tracking-wider",children:n?"Destino da Importa\xe7\xe3o":"Mover para Pasta (Opcional)"})]}),(0,s.jsx)("span",{className:"text-[10px] text-gray-600 group-open:hidden",children:y?"1 pasta selecionada":"Clique para expandir"})]})}),(0,s.jsxs)("div",{className:"mt-2 p-3 bg-[#0f111a]/20 rounded-lg border border-white/5",children:[(0,s.jsx)("label",{className:"text-[10px] uppercase font-bold text-gray-400 mb-1 block",children:"Localiza\xe7\xe3o"}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsxs)("select",{value:y,onChange:e=>N(e.target.value),className:"\n                          w-full h-9 bg-[#0f111a] border rounded-lg px-3 text-xs text-gray-200 \n                          focus:outline-none focus:border-[#2979ff] appearance-none cursor-pointer transition-all\n                          ".concat(n?"border-emerald-500/30":"border-white/10","\n                        "),children:[(0,s.jsx)("option",{value:"",children:n?"\uD83D\uDCC2 Raiz (Padr\xe3o)":"\uD83D\uDCCD Manter atual"}),!n&&(0,s.jsx)("option",{value:"root",children:"\uD83D\uDCC2 Mover para Raiz"}),I.map(e=>(0,s.jsxs)("option",{value:e.id,children:[e.emoji," ",e.name]},e.id))]}),(0,s.jsx)(eT.Z,{size:12,className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 pointer-events-none"})]})]})]})]})]}),D&&(0,s.jsx)("div",{className:"animate-in slide-in-from-top-2 duration-200 mb-4 p-2 bg-[#0f111a] rounded-lg border border-white/5",children:(0,s.jsx)(eF,{onSelect:e=>{p(e),C(!1)},selectedEmoji:h})}),n&&"folder"===t.type&&t.children&&(0,s.jsxs)("div",{className:"mb-4 p-3 bg-emerald-500/5 border border-emerald-500/20 rounded-lg animate-in fade-in duration-300",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-2 text-emerald-400",children:[(0,s.jsx)(eM.Z,{size:14}),(0,s.jsx)("span",{className:"text-[10px] font-bold uppercase tracking-widest",children:"Conte\xfado"})]}),(0,s.jsx)("div",{className:"bg-[#0f111a]/50 rounded-lg p-2 border border-white/5 max-h-32 overflow-y-auto custom-scrollbar",children:L(t.children)})]}),(r&&Z||n&&Z&&!t.children)&&(0,s.jsxs)("div",{className:"space-y-4 pt-4 border-t border-white/5 animate-in slide-in-from-top-2 duration-300",children:[(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-[10px] uppercase font-bold text-gray-400 mb-1.5 block",children:"Categoria"}),(0,s.jsx)("input",{type:"text",value:b,onChange:e=>j(e.target.value),placeholder:"Ex: System...",className:"w-full h-9 bg-[#0f111a] border border-white/10 rounded-lg px-3 text-xs text-gray-300 focus:outline-none focus:border-[#2979ff] transition-all"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-[10px] uppercase font-bold text-gray-400 mb-1.5 block",children:"Tags"}),(0,s.jsx)("input",{type:"text",value:v,onChange:e=>w(e.target.value),placeholder:"Ex: dev, react",className:"w-full h-9 bg-[#0f111a] border border-white/10 rounded-lg px-3 text-xs text-gray-300 focus:outline-none focus:border-[#2979ff] transition-all"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-[10px] uppercase font-bold text-gray-400 mb-1.5 block",children:"Conte\xfado do Prompt"}),(0,s.jsx)("textarea",{value:g,onChange:e=>f(e.target.value),placeholder:"Digite o prompt aqui...",className:"w-full h-48 bg-[#0f111a] border border-white/10 rounded-lg p-3 text-xs text-gray-300 focus:outline-none focus:border-[#2979ff] transition-all font-mono leading-relaxed resize-none custom-scrollbar"})]})]})]}),(0,s.jsxs)("div",{className:"flex justify-end gap-3 px-5 py-4 border-t border-white/5 bg-[#1e2330] rounded-b-xl shrink-0",children:[(0,s.jsx)("button",{onClick:l,className:"px-4 py-2 text-xs font-medium rounded-lg text-gray-300 border border-white/10 hover:bg-white/10 transition-colors",children:"Cancelar"}),(0,s.jsx)("button",{onClick:P,disabled:!u.trim(),className:"\n                px-5 py-2 text-xs font-bold rounded-lg text-white transition-all shadow-lg \n                disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2\n                ".concat(n?"bg-emerald-600 hover:bg-emerald-500 shadow-emerald-900/20":"bg-[#2979ff] hover:bg-[#2264d1] shadow-blue-900/20","\n              "),children:n?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(eP.Z,{size:14})," Importar"]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(eA.Z,{size:14})," Salvar"]})})]})]})})})},eK=e=>{let[t,r]=(0,a.useState)(null);return{handleMouseDown:e=>{e.target===e.currentTarget&&r({x:e.clientX,y:e.clientY})},handleMouseUp:s=>{if(t)5>Math.sqrt(Math.abs(s.clientX-t.x)**2+Math.abs(s.clientY-t.y)**2)&&e(),r(null)}}},eU=()=>{var e;let t=M(e=>e.isPromptViewerOpen),r=M(e=>e.selectedPrompt),{setPromptViewerOpen:n,openEditModal:i}=M(e=>e.actions),[l,o]=(0,a.useState)(!1),[d,c]=(0,a.useState)(!1),{handleMouseDown:x,handleMouseUp:u}=eK(()=>n(!1));return t&&r?(0,s.jsx)(el,{className:"backdrop-blur-sm bg-black/80",onMouseDown:x,onMouseUp:u,children:(0,s.jsxs)("div",{onClick:e=>e.stopPropagation(),className:"\n          bg-[#1e2330] rounded-xl border border-white/10 shadow-2xl w-full \n          flex flex-col max-h-[90vh] animate-in zoom-in-95 duration-300 transition-all\n          ".concat(d?"max-w-5xl h-[85vh] border-[#2979ff]/30 shadow-[0_0_50px_rgba(0,0,0,0.5)]":"max-w-3xl","\n        "),children:[(0,s.jsxs)("div",{className:"\n            flex items-center justify-between p-5 border-b border-white/5 shrink-0 \n            transition-opacity duration-300\n            ".concat(d?"opacity-40 hover:opacity-100":"opacity-100","\n          "),children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"w-10 h-10 rounded-lg bg-gradient-to-br from-[#2979ff]/20 to-purple-500/20 flex items-center justify-center text-2xl",children:r.emoji||"\uD83D\uDCC4"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-lg font-bold text-white",children:r.name}),(0,s.jsxs)("div",{className:"flex items-center gap-2 text-xs text-gray-400",children:[(0,s.jsx)("span",{className:"bg-white/5 px-1.5 py-0.5 rounded border border-white/5",children:r.category||"Geral"}),(0,s.jsx)("span",{children:"•"}),(0,s.jsx)("span",{children:r.date})]})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("button",{onClick:()=>c(!d),className:"\n                p-2 rounded-lg transition-colors\n                ".concat(d?"bg-[#2979ff] text-white shadow-lg shadow-blue-500/30":"text-gray-400 hover:bg-white/10 hover:text-white","\n              "),title:d?"Sair do Modo Foco":"Modo Foco",children:d?(0,s.jsx)(eD.Z,{size:18}):(0,s.jsx)(eC.Z,{size:18})}),!d&&(0,s.jsx)("button",{onClick:()=>{n(!1),i(r,!0)},className:"p-2 hover:bg-white/10 rounded-lg text-gray-400 hover:text-white transition-colors",title:"Editar",children:(0,s.jsx)($.Z,{size:18})}),(0,s.jsx)("button",{onClick:()=>n(!1),className:"p-2 hover:bg-white/10 rounded-lg text-gray-400 hover:text-white transition-colors",children:(0,s.jsx)(eL.Z,{size:20})})]})]}),(0,s.jsx)("div",{className:"\n            flex-1 overflow-y-auto custom-scrollbar bg-[#0f111a]/30 \n            transition-all duration-500\n            ".concat(d?"p-10":"p-6","\n          "),children:(0,s.jsx)("div",{className:"\n              prose prose-invert max-w-none mx-auto transition-all duration-500\n              ".concat(d?"max-w-4xl":"","\n            "),children:(0,s.jsx)("div",{className:"\n                bg-[#0f111a] border border-white/5 rounded-lg font-mono leading-relaxed \n                text-gray-300 whitespace-pre-wrap shadow-inner transition-all duration-500\n                ".concat(d?"p-10 text-lg border-none bg-transparent shadow-none":"p-6 text-sm","\n              "),children:r.content})})}),(0,s.jsxs)("div",{className:"\n            p-5 border-t border-white/5 bg-[#13161c] flex justify-between items-center shrink-0 \n            transition-opacity duration-300\n            ".concat(d?"opacity-20 hover:opacity-100":"opacity-100","\n          "),children:[(0,s.jsx)("div",{className:"flex gap-2",children:null===(e=r.tags)||void 0===e?void 0:e.map(e=>(0,s.jsx)("span",{className:"text-[10px] uppercase font-bold px-2 py-1 rounded bg-white/5 text-gray-400 border border-white/5",children:e},e))}),(0,s.jsxs)("button",{onClick:()=>{navigator.clipboard.writeText(r.content||""),o(!0),setTimeout(()=>o(!1),2e3)},className:"\n              px-4 py-2 rounded-lg font-bold text-sm flex items-center gap-2 transition-all\n              ".concat(l?"bg-green-500 text-white":"bg-[#2979ff] hover:bg-[#2264d1] text-white","\n            "),children:[l?(0,s.jsx)(ew.Z,{size:16}):(0,s.jsx)(eh.Z,{size:16}),l?"Copiado!":"Copiar Prompt"]})]})]})}):null};var eV=r(233);let e_=[{id:"sequential",label:"Sequencial",icon:n.Z},{id:"miller",label:"Miller Columns",icon:i.Z},{id:"mindmap",label:"Hierarquia",icon:l.Z}],eH=()=>{let e=M(e=>e.isSettingsOpen),t=M(e=>e.currentUser),r=M(e=>e.preferences),{setSettingsOpen:n,updatePreferences:i,setCurrentUser:l,showToast:o}=M(e=>e.actions),[d,x]=(0,a.useState)("sequential"),[u,m]=(0,a.useState)(null),h=(0,a.useRef)(null);return((0,a.useEffect)(()=>{e&&(x(r.defaultView||"sequential"),m(t.avatar||null))},[e,r,t]),e)?(0,s.jsx)(el,{onClick:()=>n(!1),children:(0,s.jsx)(ei,{children:(0,s.jsxs)("div",{onClick:e=>e.stopPropagation(),className:"bg-[#1e2330] rounded-xl border border-white/10 shadow-2xl w-full max-w-lg overflow-hidden",children:[(0,s.jsxs)("div",{className:"p-6 border-b border-white/5 flex justify-between items-center",children:[(0,s.jsxs)("h2",{className:"text-xl font-bold text-white flex items-center gap-2",children:[(0,s.jsx)(c.Z,{size:20,className:"text-[#2979ff]"}),"Configura\xe7\xf5es"]}),(0,s.jsx)("button",{onClick:()=>n(!1),className:"text-gray-400 hover:text-white transition-colors",children:(0,s.jsx)(eL.Z,{size:20})})]}),(0,s.jsxs)("div",{className:"p-6 space-y-8",children:[(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("h3",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest border-b border-white/5 pb-2",children:"Perfil"}),(0,s.jsxs)("div",{className:"flex items-center gap-6",children:[(0,s.jsxs)("div",{className:"relative group",children:[(0,s.jsx)("div",{className:"w-20 h-20 rounded-full bg-gradient-to-br from-[#2a3040] to-[#1e2330] border-2 border-white/10 flex items-center justify-center overflow-hidden shadow-2xl transition-transform hover:scale-105",children:u?(0,s.jsx)("img",{src:u,alt:"Profile",className:"w-full h-full object-cover"}):(0,s.jsx)("span",{className:"text-2xl font-bold text-indigo-400",children:(e=>{let t=e.replace(/[^a-zA-Z\s]/g,"").trim().split(/\s+/);return 0===t.length?"??":1===t.length?t[0].substring(0,2).toUpperCase():(t[0][0]+t[t.length-1][0]).toUpperCase()})(t.name)})}),(0,s.jsx)("button",{onClick:()=>{var e;return null===(e=h.current)||void 0===e?void 0:e.click()},className:"absolute bottom-0 right-0 p-1.5 bg-[#2979ff] text-white rounded-full shadow-lg hover:bg-[#2264d1] transition-all hover:scale-110 border border-[#1e2330]",title:"Alterar Foto",children:(0,s.jsx)(eV.Z,{size:14})}),(0,s.jsx)("input",{type:"file",ref:h,className:"hidden",accept:"image/*",onChange:e=>{var t;let r=null===(t=e.target.files)||void 0===t?void 0:t[0];if(r){let e=new FileReader;e.onloadend=()=>m(e.result),e.readAsDataURL(r)}}})]}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("p",{className:"text-white font-medium mb-1",children:"Sua Foto"}),(0,s.jsx)("p",{className:"text-xs text-gray-300 leading-relaxed",children:"Personalize como voc\xea aparece para sua equipe."})]})]})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("h3",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest border-b border-white/5 pb-2",children:"Experi\xeancia"}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("label",{className:"text-sm font-medium text-gray-300 block",children:"Visualiza\xe7\xe3o Inicial"}),(0,s.jsx)("div",{className:"grid grid-cols-3 gap-3",children:e_.map(e=>(0,s.jsxs)("button",{onClick:()=>x(e.id),className:"\n                        flex flex-col items-center justify-center gap-2 p-3 rounded-lg border \n                        transition-all duration-200 relative\n                        ".concat(d===e.id?"bg-[#2979ff]/10 border-[#2979ff] text-[#2979ff] shadow-[0_0_15px_rgba(41,121,255,0.15)] scale-[1.02]":"bg-[#0f111a] border-white/5 text-gray-300 hover:border-white/20 hover:text-gray-200","\n                      "),children:[(0,s.jsx)(e.icon,{size:20}),(0,s.jsx)("span",{className:"text-xs font-medium",children:e.label}),d===e.id&&(0,s.jsx)("div",{className:"absolute top-2 right-2 w-2 h-2 bg-[#2979ff] rounded-full shadow-[0_0_5px_#2979ff]"})]},e.id))})]})]})]}),(0,s.jsxs)("div",{className:"p-6 border-t border-white/5 bg-[#13161c] flex justify-end gap-3",children:[(0,s.jsx)("button",{onClick:()=>n(!1),className:"px-4 py-2 text-sm font-medium text-gray-300 hover:text-white transition-colors",children:"Cancelar"}),(0,s.jsxs)("button",{onClick:()=>{i({defaultView:d}),l({...t,avatar:u}),o("Prefer\xeancias salvas","success"),n(!1)},className:"px-6 py-2 text-sm font-bold bg-[#2979ff] hover:bg-[#2264d1] text-white rounded-lg shadow-lg shadow-blue-900/20 transition-all hover:scale-105 active:scale-95 flex items-center gap-2",children:[(0,s.jsx)(eA.Z,{size:16})," Salvar"]})]})]})})}):null};var eJ=r(6780);let eQ=e=>{let{notification:t,onClick:r}=e;return(0,s.jsx)("div",{onClick:r,className:"\n        p-4 border-l-4 ".concat((()=>{switch(t.type){case"transfer":return"border-l-emerald-500";case"share":return"border-l-[#5b4eff]";case"warning":return"border-l-yellow-500";default:return"border-l-gray-500"}})()," rounded-r-lg cursor-pointer\n        transition-all hover:bg-white/5\n        ").concat(t.read?"opacity-60":"bg-white/[0.02]","\n      "),children:(0,s.jsxs)("div",{className:"flex items-start gap-3",children:[(0,s.jsx)("div",{className:"w-8 h-8 rounded-full bg-white/5 flex items-center justify-center shrink-0",children:(()=>{switch(t.type){case"transfer":return(0,s.jsx)(eP.Z,{size:16,className:"text-emerald-400"});case"share":return(0,s.jsx)(U.Z,{size:16,className:"text-[#5b4eff]"});case"warning":return(0,s.jsx)(eJ.Z,{size:16,className:"text-yellow-400"});default:return(0,s.jsx)(d.Z,{size:16,className:"text-gray-400"})}})()}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,s.jsx)("h4",{className:"text-sm font-bold truncate ".concat(t.read?"text-gray-400":"text-white"),children:t.title}),!t.read&&(0,s.jsx)("span",{className:"w-2 h-2 rounded-full bg-[#2979ff] shrink-0"})]}),(0,s.jsx)("p",{className:"text-xs text-gray-400 mt-1 line-clamp-2",children:t.description}),(0,s.jsx)("span",{className:"text-[10px] text-gray-500 mt-2 block",children:t.time})]})]})})},eG=()=>{let e=M(e=>e.isNotificationsOpen),t=M(e=>e.notifications),{setNotificationsOpen:r,markNotificationRead:a,markAllNotificationsRead:n,openEditModal:i}=M(e=>e.actions);if(!e)return null;let l=t.filter(e=>!e.read).length,o=e=>{a(e.id),"transfer"===e.type&&e.payload&&(r(!1),i(e.payload,!1,!0))};return(0,s.jsx)(el,{onClick:()=>r(!1),children:(0,s.jsx)(ei,{children:(0,s.jsxs)("div",{onClick:e=>e.stopPropagation(),className:"bg-[#1e2330] rounded-xl border border-white/10 shadow-2xl w-full max-w-md overflow-hidden",children:[(0,s.jsxs)("div",{className:"p-4 border-b border-white/5 flex justify-between items-center",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsxs)("h2",{className:"text-lg font-bold text-white flex items-center gap-2",children:[(0,s.jsx)(d.Z,{size:18,className:"text-[#2979ff]"}),"Notifica\xe7\xf5es"]}),l>0&&(0,s.jsxs)("span",{className:"bg-[#2979ff] text-white text-[10px] font-bold px-2 py-0.5 rounded-full",children:[l," novas"]})]}),(0,s.jsx)("button",{onClick:()=>r(!1),className:"text-gray-400 hover:text-white transition-colors",children:(0,s.jsx)(eL.Z,{size:20})})]}),(0,s.jsx)("div",{className:"max-h-[400px] overflow-y-auto custom-scrollbar",children:0===t.length?(0,s.jsxs)("div",{className:"p-8 text-center",children:[(0,s.jsx)("div",{className:"w-16 h-16 rounded-full bg-white/5 flex items-center justify-center mx-auto mb-4",children:(0,s.jsx)(ew.Z,{size:32,className:"text-gray-500 opacity-40"})}),(0,s.jsx)("p",{className:"text-sm font-medium text-gray-400",children:"Tudo em dia!"}),(0,s.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Nenhuma notifica\xe7\xe3o pendente"})]}):(0,s.jsx)("div",{className:"divide-y divide-white/5",children:t.map(e=>(0,s.jsx)(eQ,{notification:e,onClick:()=>o(e)},e.id))})}),t.length>0&&(0,s.jsx)("div",{className:"p-4 border-t border-white/5 flex justify-end",children:(0,s.jsx)("button",{onClick:n,className:"text-xs font-medium text-[#2979ff] hover:text-blue-400 transition-colors",children:"Marcar todas como lidas"})})]})})})};var eX=r(9590);let eY=()=>{let e=M(e=>e.isMasterLoginOpen),t=M(e=>e.generatedKeys),r=M(e=>e.masterKey);M(e=>e.currentUser);let{setMasterLoginOpen:n,generateKey:i,revokeKey:l,login:d,logout:c,showToast:u}=M(e=>e.actions),[m,p]=(0,a.useState)("generator"),[g,f]=(0,a.useState)(""),[b,j]=(0,a.useState)(""),[v,w]=(0,a.useState)(""),[y,N]=(0,a.useState)(""),D=(0,a.useRef)(null);if((0,a.useEffect)(()=>{e||(f(""),j(""),w(""),N(""),p("generator"))},[e]),(0,a.useEffect)(()=>{if(!e)return;let t=e=>{"Escape"===e.key&&n(!1)};return document.addEventListener("keydown",t),()=>document.removeEventListener("keydown",t)},[e,n]),!e)return null;let C=e=>{navigator.clipboard.writeText(e),u("Chave copiada!","info")},k=e=>"\n    px-4 py-2 text-sm font-medium transition-all\n    ".concat(m===e?"text-red-400 border-b-2 border-red-500":"text-gray-400 hover:text-gray-300","\n  ");return(0,s.jsx)(el,{onClick:()=>n(!1),children:(0,s.jsx)(ei,{children:(0,s.jsxs)("div",{ref:D,onClick:e=>e.stopPropagation(),className:"bg-[#1e2330] rounded-xl border border-white/10 shadow-2xl w-full max-w-2xl flex flex-col max-h-[90vh]",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between p-6 shrink-0",children:[(0,s.jsxs)("h3",{className:"text-xl font-bold text-white flex items-center gap-2",children:[(0,s.jsx)(o.Z,{size:20,className:"text-red-400"}),"Master Access Panel"]}),(0,s.jsx)("button",{onClick:()=>n(!1),className:"text-gray-400 hover:text-white transition-colors p-1",children:(0,s.jsx)(eL.Z,{size:20})})]}),(0,s.jsxs)("div",{className:"flex border-b border-white/10 px-6 shrink-0",children:[(0,s.jsx)("button",{onClick:()=>p("generator"),className:k("generator"),children:"Gerar Chaves"}),(0,s.jsx)("button",{onClick:()=>p("session"),className:k("session"),children:"Sess\xf5es & Revoga\xe7\xe3o"}),(0,s.jsx)("button",{onClick:()=>p("login"),className:k("login"),children:"Sess\xe3o de Auditoria"})]}),(0,s.jsxs)("div",{className:"flex-1 overflow-y-auto custom-scrollbar p-6",children:["generator"===m&&(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"p-4 bg-[#252b3b]/50 rounded-lg border border-white/10 space-y-4",children:[(0,s.jsxs)("h4",{className:"text-sm font-bold text-white flex items-center gap-2",children:[(0,s.jsx)(H.Z,{size:16})," Gerar Nova Chave de Acesso"]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-[10px] uppercase font-bold text-gray-400 mb-1 block",children:"Nome do Novo Usu\xe1rio"}),(0,s.jsx)("input",{type:"text",value:g,onChange:e=>{f(e.target.value),N("")},placeholder:"Ex: Carlos",className:"w-full h-10 bg-[#0f111a] border border-white/10 rounded-lg px-3 text-sm text-gray-300 focus:outline-none focus:border-[#2979ff] transition-all placeholder-gray-600"})]}),(0,s.jsxs)("button",{onClick:()=>{if(!g.trim()){N("Nome de Usu\xe1rio \xe9 obrigat\xf3rio");return}i(g.trim()),f(""),N(""),p("session")},disabled:!g.trim(),className:"w-full px-6 py-2 text-sm font-bold bg-green-600 hover:bg-green-500 text-white rounded-lg transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:[(0,s.jsx)(o.Z,{size:16})," Gerar Chave \xdanica"]})]}),(0,s.jsxs)("div",{className:"p-4 bg-[#252b3b]/50 rounded-lg border border-white/10",children:[(0,s.jsxs)("h4",{className:"text-sm font-bold text-white flex items-center gap-2",children:[(0,s.jsx)(h.Z,{size:16})," Chaves Ativas"]}),(0,s.jsx)("div",{className:"mt-4",children:0===t.filter(e=>e.active&&e.key!==r).length?(0,s.jsx)("p",{className:"text-xs text-gray-400",children:"Nenhuma chave de usu\xe1rio ativa."}):(0,s.jsx)("div",{className:"space-y-3",children:t.filter(e=>e.active&&e.key!==r).map(e=>(0,s.jsxs)("div",{className:"p-3 bg-[#0f111a] rounded-lg border border-white/5 flex items-center justify-between gap-3",children:[(0,s.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,s.jsx)("p",{className:"text-xs font-semibold text-white truncate",children:e.userName}),(0,s.jsxs)("p",{className:"text-[10px] font-mono text-gray-300 mt-1 flex items-center gap-2",children:[e.key,(0,s.jsx)("button",{onClick:()=>C(e.key),className:"text-gray-400 hover:text-[#2979ff] transition-colors",title:"Copiar chave",children:(0,s.jsx)(eh.Z,{size:10})})]})]}),(0,s.jsx)("button",{onClick:()=>l(e.id),className:"p-1.5 rounded-full bg-red-500/10 hover:bg-red-500/20 text-red-400 transition-colors shrink-0",title:"Revogar Chave",children:(0,s.jsx)(_.Z,{size:14})})]},e.id))})})]})]}),"session"===m&&(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("p",{className:"text-sm text-gray-300",children:"Auditoria e controle de todas as chaves emitidas (incluindo revogadas)."}),(0,s.jsx)("div",{className:"space-y-3",children:t.map(e=>(0,s.jsx)("div",{className:"\n                        p-3 rounded-lg border\n                        ".concat(e.active?"bg-[#0f111a] border-green-500/30":"bg-[#0f111a]/50 border-white/5 opacity-60","\n                      "),children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,s.jsx)("p",{className:"text-sm font-semibold truncate ".concat(e.active?"text-white":"text-gray-400"),children:e.userName}),(0,s.jsxs)("p",{className:"text-[10px] font-mono text-gray-300 mt-1 flex items-center gap-2",children:[e.key,(0,s.jsx)("span",{className:"\n                                text-[9px] font-bold px-1.5 py-0.5 rounded-full uppercase\n                                ".concat(e.active?"bg-green-500/20 text-green-300":"bg-red-500/20 text-red-300","\n                              "),children:e.active?"ATIVO":"REVOGADO"})]})]}),(0,s.jsx)("button",{onClick:()=>l(e.id),disabled:!e.active||e.key===r,className:"\n                            p-1.5 rounded-full transition-colors shrink-0\n                            ".concat(e.active&&e.key!==r?"bg-red-500/10 hover:bg-red-500/20 text-red-400":"bg-white/5 text-gray-400 cursor-not-allowed","\n                          "),title:e.key===r?"Chave Master n\xe3o pode ser revogada":e.active?"Revogar Chave":"Chave j\xe1 revogada",children:e.active?(0,s.jsx)(_.Z,{size:14}):(0,s.jsx)(eX.Z,{size:14})})]})},e.id))})]}),"login"===m&&(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("p",{className:"text-sm text-gray-300 mb-4",children:"Insira nome e chave para auditar/reparar sess\xe3o de usu\xe1rio."}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-[10px] uppercase font-bold text-gray-400 mb-1 block",children:"Nome de Usu\xe1rio"}),(0,s.jsx)("input",{type:"text",value:b,onChange:e=>{j(e.target.value),N("")},placeholder:"Nome do usu\xe1rio",className:"w-full h-10 bg-[#0f111a] border border-white/10 rounded-lg px-3 text-sm text-gray-300 focus:outline-none focus:border-[#2979ff] transition-all placeholder-gray-600"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-[10px] uppercase font-bold text-gray-400 mb-1 block",children:"Chave de Acesso"}),(0,s.jsx)("input",{type:"password",value:v,onChange:e=>{w(e.target.value),N("")},placeholder:"Chave de Acesso",className:"w-full h-10 bg-[#0f111a] border border-white/10 rounded-lg px-3 text-sm text-gray-300 focus:outline-none focus:border-[#2979ff] transition-all placeholder-gray-600"})]})]}),y&&(0,s.jsxs)("div",{className:"mt-4 text-xs text-red-400 flex items-center gap-2 p-3 bg-red-500/10 rounded-lg",children:[(0,s.jsx)(eJ.Z,{size:14})," ",y]}),(0,s.jsx)("div",{className:"flex justify-end gap-3 pt-4 border-t border-white/5 mt-6",children:(0,s.jsxs)("button",{onClick:()=>{if(!b.trim()||!v.trim()){N("Nome e Chave s\xe3o obrigat\xf3rios");return}if(v.trim()===r){c(),n(!1);return}if(!d(b.trim(),v.trim())){N("Chave ou Nome inv\xe1lidos/revogados");return}n(!1)},disabled:!b.trim()||!v.trim(),className:"px-6 py-2 text-sm font-bold bg-indigo-600 hover:bg-indigo-500 text-white rounded-lg transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[(0,s.jsx)(x.Z,{size:16})," Iniciar Sess\xe3o"]})})]})]})]})})})},eW=()=>{let e=M(e=>e.moveSelector),{closeMoveSelector:t,moveItem:r,showToast:n}=M(e=>e.actions),[i,l]=(0,a.useState)(""),o=(0,a.useRef)(null);return((0,a.useEffect)(()=>{e.open&&l("")},[e.open]),(0,a.useEffect)(()=>{if(!e.open)return;let r=e=>{"Escape"===e.key&&t()};return document.addEventListener("keydown",r),()=>document.removeEventListener("keydown",r)},[e.open,t]),e.open&&e.draggedId)?(0,s.jsx)(el,{onClick:t,children:(0,s.jsx)(ei,{children:(0,s.jsxs)("div",{ref:o,onClick:e=>e.stopPropagation(),className:"bg-[#1e2330] rounded-xl border border-white/10 shadow-2xl w-full max-w-lg p-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,s.jsx)("h3",{className:"text-xl font-bold text-white",children:"folder"===e.draggedType?"Mover Pasta e Conte\xfado":"Mover Prompt"}),(0,s.jsx)("button",{onClick:t,className:"text-gray-400 hover:text-white transition-colors p-1",children:(0,s.jsx)(eL.Z,{size:20})})]}),(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("label",{className:"text-sm font-medium text-gray-300 block mb-3",children:"Selecione o destino:"}),(0,s.jsxs)("div",{className:"max-h-80 overflow-y-auto custom-scrollbar border border-white/10 rounded-lg bg-[#0f111a] p-2",children:[(0,s.jsx)("div",{onClick:()=>l("root"),className:"\n                  p-3 hover:bg-white/5 rounded cursor-pointer transition-colors\n                  ".concat("root"===i?"bg-[#2979ff]/10":"","\n                "),children:(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"\n                      w-10 h-10 rounded-lg bg-white/5 flex items-center justify-center\n                      ".concat("root"===i?"ring-2 ring-[#2979ff]":"","\n                    "),children:"\uD83D\uDCC1"}),(0,s.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,s.jsx)("div",{className:"font-medium ".concat("root"===i?"text-white":"text-gray-300"),children:"\uD83D\uDCC2 Raiz (Primeiro N\xedvel)"}),(0,s.jsx)("div",{className:"text-xs text-gray-400",children:"Mover para o n\xedvel superior"})]}),"root"===i&&(0,s.jsx)(eA.Z,{size:16,className:"text-[#2979ff] shrink-0"})]})}),(0,s.jsx)("div",{className:"h-px bg-white/10 my-2"}),e.availableTargets.map(e=>{var t;return(0,s.jsx)("div",{onClick:()=>l(e.id),className:"\n                    p-3 hover:bg-white/5 rounded cursor-pointer transition-colors\n                    ".concat(i===e.id?"bg-[#2979ff]/10":"","\n                  "),children:(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"\n                        w-10 h-10 rounded-lg bg-white/5 flex items-center justify-center text-lg\n                        ".concat(i===e.id?"ring-2 ring-[#2979ff]":"","\n                      "),children:e.emoji||"\uD83D\uDCC1"}),(0,s.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,s.jsx)("div",{className:"font-medium truncate ".concat(i===e.id?"text-white":"text-gray-300"),children:e.name}),(0,s.jsxs)("div",{className:"text-xs text-gray-400",children:[(null===(t=e.children)||void 0===t?void 0:t.length)||0," itens"]})]}),i===e.id&&(0,s.jsx)(eA.Z,{size:16,className:"text-[#2979ff] shrink-0"})]})},e.id)}),0===e.availableTargets.length&&(0,s.jsx)("div",{className:"p-4 text-center text-gray-500 text-sm",children:"Nenhuma pasta dispon\xedvel como destino"})]})]}),(0,s.jsxs)("div",{className:"flex justify-end gap-3 pt-4 border-t border-white/5",children:[(0,s.jsx)("button",{onClick:t,className:"px-4 py-2 text-sm font-medium text-gray-300 border border-white/10 rounded-lg hover:bg-white/10 transition-colors",children:"Cancelar"}),(0,s.jsx)("button",{onClick:()=>{i&&e.draggedId&&(r(e.draggedId,"root"===i?null:i),n("Item movido com sucesso!","success")),t()},disabled:!i,className:"px-6 py-2 text-sm font-bold bg-[#2979ff] hover:bg-[#2264d1] text-white rounded-lg transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:"Confirmar Movimento"})]})]})})}):null},e$=e=>{let{isOpen:t,onClose:r,type:n,parentId:i=null}=e,[l,o]=(0,a.useState)(""),[d,c]=(0,a.useState)("folder"===n?"\uD83D\uDCC1":"\uD83D\uDCC4"),[x,u]=(0,a.useState)(""),[m,h]=(0,a.useState)(""),[p,g]=(0,a.useState)(""),[f,b]=(0,a.useState)(i),[j,v]=(0,a.useState)(!1),w=(0,a.useRef)(null),y=M(e=>e.data),{addItem:N,showToast:D}=M(e=>e.actions);if((0,a.useEffect)(()=>{t&&(o(""),c("folder"===n?"\uD83D\uDCC1":"\uD83D\uDCC4"),u(""),h(""),g(""),b(i),v(!1))},[t,n,i]),(0,a.useEffect)(()=>{if(!t)return;let e=e=>{"Escape"===e.key&&r()};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[t,r]),!t)return null;let C="folder"===n,k=C?"Pasta":"Prompt",z=(e=>{let t=[],r=e=>{for(let s of e)"folder"===s.type&&(t.push(s),s.children&&r(s.children))};return r(e),t})(y),S=()=>{if(!l.trim()){D("Nome \xe9 obrigat\xf3rio","error");return}let e="".concat(n,"-").concat(Date.now(),"-").concat(Math.random().toString(36).substr(2,9)),t=new Date().toLocaleDateString("pt-BR");C?(N({id:e,name:l.trim(),type:"folder",emoji:d,children:[]},f),D('Pasta "'.concat(l,'" criada!'),"success")):(N({id:e,name:l.trim(),type:"prompt",emoji:d,content:x.trim(),category:m.trim()||void 0,tags:p.split(",").map(e=>e.trim()).filter(Boolean),date:t},f),D('Prompt "'.concat(l,'" criado!'),"success")),r()};return(0,s.jsx)(el,{onClick:r,children:(0,s.jsx)(ei,{children:(0,s.jsxs)("div",{ref:w,onClick:e=>e.stopPropagation(),className:"\n            bg-[#1e2330] rounded-xl border border-white/10 shadow-2xl w-full p-0 \n            flex flex-col max-h-[90vh]\n            ".concat(C?"max-w-md":"max-w-2xl","\n          "),children:[(0,s.jsxs)("div",{className:"flex items-center justify-between px-5 py-4 border-b border-white/5 shrink-0 bg-[#1e2330] rounded-t-xl",children:[(0,s.jsxs)("h3",{className:"text-base font-bold text-white flex items-center gap-2",children:[C?(0,s.jsx)(O.Z,{size:18,className:"text-[#2979ff]"}):(0,s.jsx)(R.Z,{size:18,className:"text-[#2979ff]"}),"Criar ",k]}),(0,s.jsx)("button",{onClick:r,className:"text-gray-400 hover:text-white transition-colors p-1 rounded hover:bg-white/5",children:(0,s.jsx)(eL.Z,{size:16})})]}),(0,s.jsxs)("div",{className:"flex-1 overflow-y-auto custom-scrollbar p-5",children:[(0,s.jsxs)("div",{className:"grid grid-cols-[auto_1fr] gap-4 mb-4",children:[(0,s.jsxs)("div",{className:"flex flex-col gap-1.5",children:[(0,s.jsx)("label",{className:"text-[10px] uppercase font-bold text-gray-400",children:"\xcdcone"}),(0,s.jsx)(eO,{emoji:d,onOpenPicker:()=>v(!j)})]}),(0,s.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-[10px] uppercase font-bold text-gray-400 mb-1 block",children:"Nome"}),(0,s.jsx)("input",{type:"text",value:l,onChange:e=>o(e.target.value),onKeyDown:e=>{"Enter"===e.key&&C&&S()},placeholder:"Nome da ".concat(k),className:"w-full h-9 bg-[#0f111a] border border-white/10 rounded-lg px-3 text-sm text-gray-200 focus:outline-none focus:border-[#2979ff] transition-all placeholder-gray-600",autoFocus:!0})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-[10px] uppercase font-bold text-gray-400 mb-1 block",children:"Localiza\xe7\xe3o"}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsxs)("select",{value:f||"",onChange:e=>b(e.target.value||null),className:"w-full h-9 bg-[#0f111a] border border-white/10 rounded-lg px-3 text-xs text-gray-200 focus:outline-none focus:border-[#2979ff] appearance-none cursor-pointer transition-all",children:[(0,s.jsx)("option",{value:"",children:"\uD83D\uDCC2 Raiz (Primeiro N\xedvel)"}),z.map(e=>(0,s.jsxs)("option",{value:e.id,children:[e.emoji," ",e.name]},e.id))]}),(0,s.jsx)(eT.Z,{size:12,className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 pointer-events-none"})]})]})]})]}),j&&(0,s.jsx)("div",{className:"animate-in slide-in-from-top-2 duration-200 mb-4 p-2 bg-[#0f111a] rounded-lg border border-white/5",children:(0,s.jsx)(eF,{onSelect:e=>{c(e),v(!1)},selectedEmoji:d})}),!C&&(0,s.jsxs)("div",{className:"space-y-4 pt-4 border-t border-white/5 animate-in slide-in-from-top-2 duration-300",children:[(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-[10px] uppercase font-bold text-gray-400 mb-1.5 block",children:"Categoria"}),(0,s.jsx)("input",{type:"text",value:m,onChange:e=>h(e.target.value),placeholder:"Ex: System, Marketing...",className:"w-full h-9 bg-[#0f111a] border border-white/10 rounded-lg px-3 text-xs text-gray-300 focus:outline-none focus:border-[#2979ff] transition-all"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-[10px] uppercase font-bold text-gray-400 mb-1.5 block",children:"Tags"}),(0,s.jsx)("input",{type:"text",value:p,onChange:e=>g(e.target.value),placeholder:"Ex: dev, react, code",className:"w-full h-9 bg-[#0f111a] border border-white/10 rounded-lg px-3 text-xs text-gray-300 focus:outline-none focus:border-[#2979ff] transition-all"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-[10px] uppercase font-bold text-gray-400 mb-1.5 block",children:"Conte\xfado do Prompt"}),(0,s.jsx)("textarea",{value:x,onChange:e=>u(e.target.value),placeholder:"Digite o conte\xfado do prompt aqui...",className:"w-full h-48 bg-[#0f111a] border border-white/10 rounded-lg p-3 text-xs text-gray-300 focus:outline-none focus:border-[#2979ff] transition-all font-mono leading-relaxed resize-none custom-scrollbar"})]})]})]}),(0,s.jsxs)("div",{className:"flex justify-end gap-3 px-5 py-4 border-t border-white/5 bg-[#1e2330] rounded-b-xl shrink-0",children:[(0,s.jsx)("button",{onClick:r,className:"px-4 py-2 text-xs font-medium rounded-lg text-gray-300 border border-white/10 hover:bg-white/10 transition-colors",children:"Cancelar"}),(0,s.jsxs)("button",{onClick:S,disabled:!l.trim(),className:"px-5 py-2 text-xs font-bold rounded-lg text-white bg-[#2979ff] hover:bg-[#2264d1] transition-all shadow-lg shadow-blue-900/20 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[(0,s.jsx)(eA.Z,{size:14}),"Criar ",k]})]})]})})})},e0=()=>{let[e,t]=(0,a.useState)(!1),[r,s]=(0,a.useState)("folder"),[n,i]=(0,a.useState)(null);return{isOpen:e,type:r,parentId:n,openCreateModal:function(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;s(e),i(r),t(!0)},closeCreateModal:()=>{t(!1)}}};var e1=r(6127);let e2=e=>{var t;let{isOpen:r,onClose:n,item:i,onConfirm:l}=e,o=(0,a.useRef)(null),{deleteItem:d,showToast:c,clearSelection:x}=M(e=>e.actions);if((0,a.useEffect)(()=>{if(!r)return;let e=e=>{"Escape"===e.key&&n(),"Enter"===e.key&&f()};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[r,i]),!r||!i)return null;let u="folder"===i.type,m=u&&(null===(t=i.children)||void 0===t?void 0:t.length)||0,h=m>0,p=e=>{var t,r;let s=(null===(t=e.children)||void 0===t?void 0:t.length)||0;return null===(r=e.children)||void 0===r||r.forEach(e=>{"folder"===e.type&&(s+=p(e))}),s},g=u?p(i):0,f=()=>{i&&(l?l(i):(d(i.id),x(),c("".concat(u?"Pasta":"Prompt",' "').concat(i.name,'" exclu\xeddo!'),"success")),n())};return(0,s.jsx)(el,{onClick:n,children:(0,s.jsx)(ei,{children:(0,s.jsxs)("div",{ref:o,onClick:e=>e.stopPropagation(),className:"bg-[#1e2330] rounded-xl border border-white/10 shadow-2xl w-full max-w-md p-0 flex flex-col",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between px-5 py-4 border-b border-white/5 shrink-0 bg-[#1e2330] rounded-t-xl",children:[(0,s.jsxs)("h3",{className:"text-base font-bold text-white flex items-center gap-2",children:[(0,s.jsx)(e1.Z,{size:18,className:"text-red-400"}),"Confirmar Exclus\xe3o"]}),(0,s.jsx)("button",{onClick:n,className:"text-gray-400 hover:text-white transition-colors p-1 rounded hover:bg-white/5",children:(0,s.jsx)(eL.Z,{size:16})})]}),(0,s.jsxs)("div",{className:"p-5",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4 p-4 bg-[#0f111a] rounded-xl border border-white/5 mb-4",children:[(0,s.jsx)("div",{className:"\n                w-12 h-12 rounded-xl flex items-center justify-center text-2xl\n                ".concat(u?"bg-[#2979ff]/10":"bg-emerald-500/10","\n              "),children:i.emoji||(u?"\uD83D\uDCC1":"\uD83D\uDCC4")}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsx)("h4",{className:"text-sm font-bold text-white truncate",children:i.name}),(0,s.jsx)("div",{className:"flex items-center gap-2 text-[10px] text-gray-400 mt-1",children:u?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(ec.Z,{size:12}),(0,s.jsx)("span",{children:"Pasta"}),h&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("span",{children:"•"}),(0,s.jsxs)("span",{children:[m," itens diretos"]})]})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(ek.Z,{size:12}),(0,s.jsx)("span",{children:"Prompt"}),i.category&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("span",{children:"•"}),(0,s.jsx)("span",{children:i.category})]})]})})]})]}),(0,s.jsxs)("div",{className:"p-4 bg-red-500/5 border border-red-500/20 rounded-xl mb-4",children:[(0,s.jsxs)("p",{className:"text-sm text-gray-300",children:["Voc\xea est\xe1 prestes a excluir ",u?"a pasta":"o prompt"," ",(0,s.jsxs)("span",{className:"font-bold text-white",children:['"',i.name,'"']}),"."]}),h&&(0,s.jsxs)("div",{className:"mt-3 p-3 bg-red-500/10 rounded-lg border border-red-500/30",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 text-red-400 mb-2",children:[(0,s.jsx)(e1.Z,{size:14}),(0,s.jsx)("span",{className:"text-xs font-bold uppercase tracking-wider",children:"Aten\xe7\xe3o"})]}),(0,s.jsxs)("p",{className:"text-xs text-red-300",children:["Esta pasta cont\xe9m"," ",(0,s.jsxs)("span",{className:"font-bold",children:[g," item(s)"]})," que tamb\xe9m ser\xe3o exclu\xeddos permanentemente."]})]}),(0,s.jsx)("p",{className:"text-xs text-gray-400 mt-3",children:"Esta a\xe7\xe3o n\xe3o pode ser desfeita."})]}),!u&&i.content&&(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("label",{className:"text-[10px] uppercase font-bold text-gray-400 mb-2 block",children:"Preview do Conte\xfado"}),(0,s.jsx)("div",{className:"p-3 bg-[#0f111a] rounded-lg border border-white/5 max-h-24 overflow-y-auto custom-scrollbar",children:(0,s.jsxs)("pre",{className:"text-[10px] text-gray-400 font-mono whitespace-pre-wrap",children:[i.content.substring(0,200),i.content.length>200&&"..."]})})]})]}),(0,s.jsxs)("div",{className:"flex justify-end gap-3 px-5 py-4 border-t border-white/5 bg-[#1e2330] rounded-b-xl shrink-0",children:[(0,s.jsx)("button",{onClick:n,className:"px-4 py-2 text-xs font-medium rounded-lg text-gray-300 border border-white/10 hover:bg-white/10 transition-colors",children:"Cancelar"}),(0,s.jsxs)("button",{onClick:f,className:"px-5 py-2 text-xs font-bold rounded-lg text-white bg-red-600 hover:bg-red-500 transition-all shadow-lg shadow-red-900/20 flex items-center gap-2",children:[(0,s.jsx)(_.Z,{size:14}),"Excluir ",u?"Pasta":"Prompt"]})]})]})})})},e3=()=>{let[e,t]=a.useState(!1),[r,s]=a.useState(null);return{isOpen:e,item:r,openDeleteModal:e=>{s(e),t(!0)},closeDeleteModal:()=>{t(!1),s(null)}}};var e5=r(690);let e4={success:{icon:ew.Z,bg:"bg-green-500/10",border:"border-green-500/30",text:"text-green-400"},error:{icon:eJ.Z,bg:"bg-red-500/10",border:"border-red-500/30",text:"text-red-400"},info:{icon:e5.Z,bg:"bg-[#2979ff]/10",border:"border-[#2979ff]/30",text:"text-[#2979ff]"},warning:{icon:e1.Z,bg:"bg-yellow-500/10",border:"border-yellow-500/30",text:"text-yellow-400"}},e9=e=>{let{message:t,type:r}=e,a=e4[r],n=a.icon;return(0,s.jsx)("div",{className:"fixed bottom-6 left-1/2 -translate-x-1/2 z-[300] animate-in slide-in-from-bottom-4 fade-in duration-300",children:(0,s.jsxs)("div",{className:"\n          flex items-center gap-3 px-4 py-3 rounded-xl border shadow-2xl shadow-black/50\n          ".concat(a.bg," ").concat(a.border,"\n        "),children:[(0,s.jsx)(n,{size:18,className:a.text}),(0,s.jsx)("span",{className:"text-sm font-medium text-white",children:t})]})})};var e8=r(6717),e6=r(404),e7=r(4392);let te=e=>{let t=new Set,r=e=>{for(let a of e){if("prompt"===a.type&&a.tags){var s;null===(s=a.tags)||void 0===s||s.forEach(e=>t.add(e))}"folder"===a.type&&a.children&&r(a.children)}};return r(e),Array.from(t).sort()},tt=e=>{let{tag:t,isActive:r,onClick:a,count:n}=e;return(0,s.jsxs)("button",{onClick:a,className:"\n        inline-flex items-center gap-1.5 px-2.5 py-1 rounded-lg text-[10px] uppercase font-bold\n        tracking-wider transition-all duration-150 border\n        ".concat(r?"bg-[#2979ff]/20 text-[#2979ff] border-[#2979ff]/30 shadow-sm shadow-blue-900/20":"bg-white/5 text-gray-400 border-white/5 hover:bg-white/10 hover:text-white hover:border-white/20","\n      "),children:[(0,s.jsx)(e8.Z,{size:10}),(0,s.jsx)("span",{children:t}),void 0!==n&&(0,s.jsx)("span",{className:"\n          px-1 py-0.5 rounded text-[8px] font-bold\n          ".concat(r?"bg-[#2979ff]/30":"bg-white/10","\n        "),children:n}),r&&(0,s.jsx)(eL.Z,{size:10,className:"hover:text-white transition-colors"})]})},tr=e=>{let{className:t="",variant:r="horizontal",maxVisible:n=10,showCounts:i=!1,onFilterChange:l}=e,[o,d]=(0,a.useState)(new Set),[c,x]=(0,a.useState)(!1),[u,h]=(0,a.useState)(""),p=M(e=>e.data),g=(0,a.useMemo)(()=>te(p),[p]),f=(0,a.useMemo)(()=>{let e={},t=r=>{for(let a of r){if("prompt"===a.type&&a.tags){var s;null===(s=a.tags)||void 0===s||s.forEach(t=>{e[t]=(e[t]||0)+1})}"folder"===a.type&&a.children&&t(a.children)}};return t(p),e},[p]),b=(0,a.useMemo)(()=>u?g.filter(e=>e.toLowerCase().includes(u.toLowerCase())):g,[g,u]),j=c?b:b.slice(0,n),v=b.length>n,w=e=>{d(t=>{let r=new Set(t);return r.has(e)?r.delete(e):r.add(e),null==l||l(Array.from(r)),r})},y=()=>{d(new Set),null==l||l([])};return 0===g.length?null:"compact"===r?(0,s.jsxs)("div",{className:"flex items-center gap-2 ".concat(t),children:[(0,s.jsx)(e6.Z,{size:14,className:"text-gray-400"}),(0,s.jsxs)("div",{className:"flex items-center gap-1.5 overflow-x-auto custom-scrollbar pb-1",children:[j.slice(0,5).map(e=>(0,s.jsx)(tt,{tag:e,isActive:o.has(e),onClick:()=>w(e)},e)),g.length>5&&(0,s.jsxs)("span",{className:"text-[10px] text-gray-500 whitespace-nowrap",children:["+",g.length-5]})]}),o.size>0&&(0,s.jsx)("button",{onClick:y,className:"p-1 text-gray-400 hover:text-white hover:bg-white/10 rounded transition-colors",title:"Limpar filtros",children:(0,s.jsx)(eL.Z,{size:14})})]}):"vertical"===r?(0,s.jsxs)("div",{className:"flex flex-col ".concat(t),children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(e8.Z,{size:14,className:"text-[#2979ff]"}),(0,s.jsx)("span",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest",children:"Filtrar por Tags"})]}),o.size>0&&(0,s.jsxs)("button",{onClick:y,className:"text-[10px] text-gray-400 hover:text-white transition-colors",children:["Limpar (",o.size,")"]})]}),(0,s.jsxs)("div",{className:"relative mb-3",children:[(0,s.jsx)(m.Z,{size:12,className:"absolute left-2.5 top-1/2 -translate-y-1/2 text-gray-500"}),(0,s.jsx)("input",{type:"text",value:u,onChange:e=>h(e.target.value),placeholder:"Buscar tags...",className:"w-full h-8 bg-[#0f111a] border border-white/10 rounded-lg pl-8 pr-3 text-[10px] text-gray-300 focus:outline-none focus:border-[#2979ff] transition-all placeholder-gray-600"})]}),(0,s.jsx)("div",{className:"flex flex-wrap gap-1.5",children:j.map(e=>(0,s.jsx)(tt,{tag:e,isActive:o.has(e),onClick:()=>w(e),count:i?f[e]:void 0},e))}),v&&(0,s.jsx)("button",{onClick:()=>x(!c),className:"mt-3 flex items-center justify-center gap-1 text-[10px] text-gray-400 hover:text-white transition-colors",children:c?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(e7.Z,{size:12}),"Mostrar menos"]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(eT.Z,{size:12}),"Ver mais ",b.length-n," tags"]})})]}):(0,s.jsxs)("div",{className:"flex items-center gap-3 ".concat(t),children:[(0,s.jsxs)("div",{className:"flex items-center gap-1.5 shrink-0",children:[(0,s.jsx)(e6.Z,{size:14,className:"text-gray-400"}),(0,s.jsx)("span",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-widest",children:"Tags"})]}),(0,s.jsx)("div",{className:"w-px h-4 bg-white/10"}),(0,s.jsxs)("div",{className:"flex items-center gap-1.5 overflow-x-auto custom-scrollbar pb-1 flex-1",children:[j.map(e=>(0,s.jsx)(tt,{tag:e,isActive:o.has(e),onClick:()=>w(e),count:i?f[e]:void 0},e)),v&&!c&&(0,s.jsxs)("button",{onClick:()=>x(!0),className:"text-[10px] text-gray-400 hover:text-white whitespace-nowrap transition-colors",children:["+",b.length-n]})]}),o.size>0&&(0,s.jsxs)("button",{onClick:y,className:"shrink-0 flex items-center gap-1 px-2 py-1 text-[10px] text-gray-400 hover:text-white hover:bg-white/10 rounded-lg transition-colors",children:[(0,s.jsx)(eL.Z,{size:10}),"Limpar"]})]})};r(797);let ts={sequential:"Navega\xe7\xe3o Sequencial",miller:"Miller Columns",mindmap:"Estrutura Hier\xe1rquica",shared:"Compartilhados"},ta=()=>{let e=M(e=>e.activeView),t=M(e=>e.slideDirection),r=M(e=>e.toast),n=M(e=>e.isLocked),i=M(e=>e.selectedFolder),{setSearchQuery:l,setIsLocked:o,showToast:d,setActiveView:c}=M(e=>e.actions),{isOpen:x,type:u,parentId:m,openCreateModal:h,closeCreateModal:p}=e0(),{isOpen:g,item:f,openDeleteModal:b,closeDeleteModal:j}=e3(),[v,w]=(0,a.useState)([]);return(0,a.useEffect)(()=>{let e=e=>{if(!(e.target instanceof HTMLInputElement||e.target instanceof HTMLTextAreaElement)){if((e.ctrlKey||e.metaKey)&&"f"===e.key){e.preventDefault();let t=document.getElementById("search-input");t&&(t.focus(),d("Busca r\xe1pida ativada","info"))}if((e.ctrlKey||e.metaKey)&&"l"===e.key&&(e.preventDefault(),o(!n)),(e.ctrlKey||e.metaKey)&&["1","2","3"].includes(e.key)){e.preventDefault();let t={1:"sequential",2:"miller",3:"mindmap"};c(t[e.key]),d("Vista: ".concat(ts[t[e.key]]),"info")}(e.ctrlKey||e.metaKey)&&"n"===e.key&&(e.preventDefault(),n?d("Desbloqueie para criar","warning"):h("folder",(null==i?void 0:i.id)||null)),(e.ctrlKey||e.metaKey)&&"p"===e.key&&!e.shiftKey&&(e.preventDefault(),n?d("Desbloqueie para criar","warning"):h("prompt",(null==i?void 0:i.id)||null))}};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[l,o,d,c,n,i,h]),(0,a.useEffect)(()=>{if("none"!==t){let e=setTimeout(()=>{M.setState({slideDirection:"none"})},300);return()=>clearTimeout(e)}},[t]),(0,s.jsxs)("div",{className:"flex flex-col h-screen bg-[#0f111a] text-gray-300 font-sans overflow-hidden antialiased",children:[(0,s.jsx)("style",{dangerouslySetInnerHTML:{__html:"\n  /* Custom Scrollbar */\n  ::-webkit-scrollbar { width: 6px; height: 6px; }\n  ::-webkit-scrollbar-track { background: transparent; }\n  ::-webkit-scrollbar-thumb { background: #2a3040; border-radius: 3px; }\n  ::-webkit-scrollbar-thumb:hover { background: #3e4559; }\n  .custom-scrollbar::-webkit-scrollbar { width: 4px; }\n  .custom-scrollbar::-webkit-scrollbar-thumb { background: #2a3040; border-radius: 2px; }\n\n  /* Selection */\n  ::selection { background: rgba(41, 121, 255, 0.3); color: white; }\n\n  /* Ensure correct colors - ATHENA Theme */\n  :root {\n    --color-primary: #2979ff;\n    --color-primary-hover: #2264d1;\n    --color-bg-dark: #0f111a;\n    --color-bg-panel: #1e2330;\n    --color-bg-secondary: #13161c;\n    --color-border: rgba(255, 255, 255, 0.1);\n  }\n"}}),(0,s.jsx)(F,{}),(0,s.jsxs)("div",{className:"h-12 bg-[#13161c] border-b border-white/5 flex items-center justify-between px-4 shrink-0",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)("span",{className:"text-xs font-bold text-gray-400 uppercase tracking-wider",children:ts[e]||"Vista"}),"shared"!==e&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"w-px h-4 bg-white/10"}),(0,s.jsx)(tr,{variant:"compact",maxVisible:5,onFilterChange:e=>{w(e),e.length>0&&d("Filtrando por ".concat(e.length," tag(s)"),"info")}})]})]}),(0,s.jsx)(Y,{})]}),(0,s.jsx)("main",{className:"flex-1 bg-[#0f111a] overflow-hidden relative",children:(0,s.jsx)("div",{className:"w-full h-full animate-in fade-in duration-300",children:(()=>{switch(e){case"sequential":default:return(0,s.jsx)(ed,{});case"miller":return(0,s.jsx)(eN,{});case"mindmap":return(0,s.jsx)(eZ,{});case"shared":return(0,s.jsx)(eI,{})}})()},e)}),(0,s.jsx)(W,{}),r&&(0,s.jsx)(e9,{message:r.message,type:r.type}),(0,s.jsx)(eB,{}),(0,s.jsx)(eU,{}),(0,s.jsx)(eH,{}),(0,s.jsx)(eG,{}),(0,s.jsx)(eY,{}),(0,s.jsx)(eW,{}),(0,s.jsx)(e$,{isOpen:x,onClose:p,type:u,parentId:m}),(0,s.jsx)(e2,{isOpen:g,onClose:j,item:f})]})}},797:function(){}}]);